(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,t,n){n("JO1w"),n("ua8M"),n("FAD3"),n("aUiL"),n("Devq"),e.exports=n("0e97")},"0e97":function(e,t){},Devq:function(e,t){},FAD3:function(e,t){},HijD:function(e,t,n){window.axios=n("vDqi"),window.axios.defaults.headers.common={"X-CSRF-TOKEN":document.getElementsByName("_token")[0].getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}},JO1w:function(e,t,n){"use strict";n.r(t);n("HijD"),n("c9kc");var a=n("q1tI"),r=n.n(a),o=n("i8i4"),i=n.n(o);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=c(this,u(t).call(this,e))).state={visible:!1},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props.activity,n="fa fa-arrow-circle-o-"+(this.state.visible?"up":"down"),a={paddingLeft:10,paddingRight:10,marginLeft:10,marginRight:10};return r.a.createElement("tr",{className:"activityExport"},r.a.createElement("td",null,r.a.createElement("a",{style:a,href:t.url},r.a.createElement("i",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"})),r.a.createElement("a",{style:a,onClick:function(){return confirm(Lang.get("react.delete-confirm"))?window.location.href="/acting/process/delete/"+t.id:null}},r.a.createElement("i",{className:"glyphicon glyphicon-trash","aria-hidden":"true"}))),r.a.createElement("td",null,(t.situation.length>30||null!==t.lessonsLearned&&t.lessonsLearned.length>30)&&r.a.createElement("i",{onClick:function(){return e.setState({visible:!e.state.visible})},className:n})),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.situation.length>30&&r.a.createElement("span",null,this.state.visible&&r.a.createElement("span",null,t.situation),!this.state.visible&&r.a.createElement("span",null,t.situation.substr(0,30),"...")),t.situation.length<=30&&t.situation),r.a.createElement("td",null,t.timeslot),r.a.createElement("td",null,t.resourcePerson),r.a.createElement("td",null,t.resourceMaterial),r.a.createElement("td",null,null!==t.lessonsLearned&&r.a.createElement("div",null,t.lessonsLearned.length>30&&r.a.createElement("span",null,this.state.visible&&r.a.createElement("span",null,t.lessonsLearned),!this.state.visible&&r.a.createElement("span",null,t.lessonsLearned.substr(0,30),"...")),t.lessonsLearned.length<=30&&t.lessonsLearned)||"-"),r.a.createElement("td",null,t.learningGoal),r.a.createElement("td",null,t.competence.join(", ")),r.a.createElement("td",null,t.evidence.length>0&&r.a.createElement("ul",null,t.evidence.map((function(e){return r.a.createElement("li",{key:e.url},r.a.createElement("a",{href:e.url},e.name))})))),r.a.createElement("td",null,t.reflection&&t.reflection.url&&r.a.createElement("a",{href:t.reflection.url},"Download")))}}])&&s(n.prototype,a),o&&s(n,o),t}(r.a.Component);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(n=!(r=g(t).call(this,e))||"object"!==m(r)&&"function"!=typeof r?h(a):r).handleClick=n.handleClick.bind(h(n)),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),n=t,(a=[{key:"handleClick",value:function(){this.props.onClickHandler(this.props.type,this.props.rule)}},{key:"render",value:function(){return r.a.createElement("label",null,r.a.createElement("input",{style:{display:"none"},type:"checkbox",value:this.props.rule,onChange:this.handleClick}),r.a.createElement("span",null,this.props.rule))}}])&&f(n.prototype,a),o&&f(n,o),t}(r.a.Component),v=n("LvDl"),E=n.n(v),w=n("wd/R"),O=n.n(w),S=n("NRhA"),j=n.n(S);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=N(t).call(this,e),(n=!r||"object"!==k(r)&&"function"!=typeof r?C(a):r).mode=window.activityActingTableMode,n.isMini=function(){return"mini"===n.mode},n.isDetail=function(){return"detail"===n.mode},n.downloadMultiple=function(){var e=n.filterActivities(n.state.activities).filter((function(e){return null!==e.reflection})).map((function(e){return e.reflection.id})),t=window.reflectionDownloadMultipleUrl+"?"+e.map((function(e){return"ids[]="+e})).join("&");window.location.href=t};var o=O()(),i=O()();return window.activities.forEach((function(e){(O()(e.date,"DD-MM-YYYY")<o||void 0===o)&&(o=O()(e.date,"DD-MM-YYYY")),(O()(e.date,"DD-MM-YYYY")>i||void 0===i)&&(i=O()(e.date,"DD-MM-YYYY"))})),n.state={activities:window.activities,filters:n.buildFilter(window.activities),exports:["Word (.docx)","E-mail Word document"],selectedExport:"Word (.docx)",exportReflections:!0,email:"",emailComment:"",emailAlert:null,startDate:o.toDate(),endDate:i.toDate()},n.updateFilter=n.updateFilter.bind(C(n)),n.exportHandler=n.exportHandler.bind(C(n)),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(a=[{key:"buildFilter",value:function(e){var t={timeslot:{rules:[],selectedRules:[]},learningGoal:{rules:[],selectedRules:[]},competence:{rules:[],selectedRules:[]}};return e.map((function(e){var n=e.timeslot;-1===t.timeslot.rules.indexOf(n)&&t.timeslot.rules.push(n);var a=e.learningGoal;-1===t.learningGoal.rules.indexOf(a)&&t.learningGoal.rules.push(a),e.competence.forEach((function(e){-1===t.competence.rules.indexOf(e)&&t.competence.rules.push(e)}))})),t.timeslot.rules.sort((function(e,t){return parseInt(e)-parseInt(t)})),t.learningGoal.rules.sort(),t.competence.rules.sort(),t}},{key:"updateFilter",value:function(e,t){var n=E.a.cloneDeep(this.state.filters),a=n[e].selectedRules.indexOf(t);a>-1?n[e].selectedRules.splice(a,1):n[e].selectedRules.push(t),this.setState({filters:n})}},{key:"filterActivities",value:function(e){var t=this;return e.filter((function(e){return 0===t.state.filters.timeslot.selectedRules.length||t.state.filters.timeslot.selectedRules.indexOf(e.timeslot)>-1})).filter((function(e){return 0===t.state.filters.learningGoal.selectedRules.length||t.state.filters.learningGoal.selectedRules.indexOf(e.learningGoal)>-1})).filter((function(e){return 0===t.state.filters.competence.selectedRules.length||e.competence.some((function(e){return t.state.filters.competence.selectedRules.indexOf(e)>-1}))})).filter((function(e){return O()(e.date,"DD-MM-YYYY").isSameOrAfter(t.state.startDate)&&O()(e.date,"DD-MM-YYYY").isSameOrBefore(t.state.endDate)}))}},{key:"exportHandler",value:function(){var e=this,t=this.filterActivities(this.state.activities).map((function(e){return e.id})),n=this.state.exportReflections?1:0;if("E-mail Word document"===this.state.selectedExport){this.setState({emailAlert:void 0});var a=this.state.email,r=this.state.emailComment,o=function(t){t.hasOwnProperty("data")&&"success"===t.data.status?e.setState({email:"",emailComment:"",emailAlert:!0}):e.setState({email:"",emailComment:"",emailAlert:!1}),setTimeout((function(){return e.setState({emailAlert:null})}),3e3)};axios.post(window.mailExportActivitiesUrl,{email:a,comment:r,ids:t,reflections:n}).then(o).catch(o)}else"Word (.docx)"===this.state.selectedExport&&(window.location.href="".concat(window.exportActivitiesUrl,"?reflections=").concat(n,"&ids[]=").concat(t.join("&ids[]=")))}},{key:"render",value:function(){var e=this.filterActivities(this.state.activities);return r.a.createElement("div",null,this.isDetail()&&this.renderFilter(),this.isDetail()&&this.renderExport(),this.isMini()&&r.a.createElement("a",{href:window.progressLink},Lang.get("react.progress-link-label")),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table blockTable"},r.a.createElement("thead",{className:"blue_tile"},r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null,Lang.get("react.date")),r.a.createElement("td",null,Lang.get("react.situation")),r.a.createElement("td",null,Lang.get("react.category")),r.a.createElement("td",null,Lang.get("react.with-whom")),r.a.createElement("td",null,Lang.get("react.theory")),r.a.createElement("td",null,Lang.get("react.learningpoints-followup")),r.a.createElement("td",null,Lang.get("react.learningquestion")),r.a.createElement("td",null,Lang.get("react.competence")),r.a.createElement("td",null,Lang.get("react.evidence")),r.a.createElement("td",null,Lang.get("react.reflection")))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement(d,{key:e.id,activity:e})}))))))}},{key:"renderFilter",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",{style:{cursor:"pointer"},onClick:function(){$(".filters").slideToggle()}},r.a.createElement("i",{className:"fa fa-arrow-circle-o-down","aria-hidden":"true"})," ",Lang.get("react.filters")),r.a.createElement("div",{className:"filters row"},r.a.createElement("div",{className:"date col-md-3"},r.a.createElement("h4",null,Lang.get("react.date")),r.a.createElement("div",null,r.a.createElement("strong",null,Lang.get("react.startdate"),":"),r.a.createElement("br",null),r.a.createElement(j.a,{className:"form-control",selected:this.state.startDate,dateFormat:"dd/MM/yyyy",onChange:function(t){return e.setState({startDate:t})}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,Lang.get("react.enddate"),":"),r.a.createElement("br",null),r.a.createElement(j.a,{className:"form-control",selected:this.state.endDate,dateFormat:"dd/MM/yyyy",onChange:function(t){return e.setState({endDate:t})}})),r.a.createElement("div",{style:{clear:"both"}})),r.a.createElement("div",{className:"timeslot col-md-4"},r.a.createElement("h4",null,Lang.get("react.category")),r.a.createElement("div",{className:"buttons"},this.state.filters.timeslot.rules.map((function(t){return r.a.createElement(b,{key:t,type:"timeslot",onClickHandler:e.updateFilter,rule:t,activated:e.state.filters.timeslot.selectedRules.indexOf(t)>-1})}))),r.a.createElement("div",{style:{clear:"both"}})),r.a.createElement("div",{className:"learningGoal col-md-4"},r.a.createElement("h4",null,Lang.get("react.learningquestion")),r.a.createElement("div",{className:"buttons"},this.state.filters.learningGoal.rules.map((function(t){return r.a.createElement(b,{key:t,type:"learningGoal",onClickHandler:e.updateFilter,rule:t,activated:e.state.filters.learningGoal.selectedRules.indexOf(t)>-1})}))),r.a.createElement("div",{style:{clear:"both"}})),r.a.createElement("div",{className:"competence col-md-4"},r.a.createElement("h4",null,Lang.get("react.competence")),r.a.createElement("div",{className:"buttons"},this.state.filters.competence.rules.map((function(t){return r.a.createElement(b,{key:t,type:"competence",onClickHandler:e.updateFilter,rule:t,activated:e.state.filters.competence.selectedRules.indexOf(t)>-1})}))),r.a.createElement("div",{style:{clear:"both"}}))),r.a.createElement("br",null))}},{key:"renderExport",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"export",style:{paddingBottom:"15px"}},r.a.createElement("label",null,Lang.get("react.export-to")),r.a.createElement("br",null),r.a.createElement("select",{onChange:function(t){e.setState({selectedExport:t.target.value})},defaultValue:this.state.selectedExport,style:{marginTop:"5px",width:"100%"}},this.state.exports.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("br",null),r.a.createElement("label",{style:{marginTop:"5px"}},r.a.createElement("input",{type:"checkbox",checked:this.state.exportReflections,onChange:function(){return e.setState({exportReflections:!e.state.exportReflections})}})," ",Lang.get("react.with-reflections")),r.a.createElement("br",null),"E-mail Word document"===this.state.selectedExport&&r.a.createElement("div",{style:{maxWidth:"400px",marginTop:"5px"}},r.a.createElement("label",null,Lang.get("react.mail-to"),": ",r.a.createElement("input",{type:"email",className:"form-control",onChange:function(t){return e.setState({email:t.target.value})},value:this.state.email})),r.a.createElement("br",null),r.a.createElement("label",null,Lang.get("react.mail-comment"),": ",r.a.createElement("textarea",{className:"form-control",onChange:function(t){return e.setState({emailComment:t.target.value})},value:this.state.emailComment})),void 0===this.state.emailAlert&&r.a.createElement("div",{className:"alert alert-info",role:"alert"},Lang.get("react.mail.sending")),!0===this.state.emailAlert&&r.a.createElement("div",{className:"alert alert-success",role:"alert"},Lang.get("react.mail.sent")),!1===this.state.emailAlert&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},Lang.get("react.mail.failed"))),r.a.createElement("button",{className:"btn btn-info",onClick:this.exportHandler,style:{marginTop:"5px"},disabled:0===this.state.activities.length||"E-mail Word document"===this.state.selectedExport&&(!this.state.email.includes("@")||!this.state.email.includes("."))},Lang.get("react.export")))))))}}])&&_(n.prototype,a),o&&_(n,o),t}(r.a.Component);function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var T="/education-programs/api/",D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getEducationPrograms",value:function(e){axios.get(T+"education-programs").then(e).catch((function(e){console.log("EducationPrograms service error: "+e)}))}},{key:"getEditableEducationProgram",value:function(e,t){axios.get(T+"editable-education-program/"+t).then(e).catch((function(e){console.log("EducationPrograms edit service error: "+e)}))}},{key:"createEducationProgram",value:function(e,t){axios.post(T+"education-program",e).then(t).catch((function(e){console.log("Unable to create education program: "+e)}))}},{key:"deleteEducationProgram",value:function(e,t){axios.delete(T+"education-program/"+e).then(t).catch((function(e){console.error(e),"error"===e.response.data.status&&e.response.data.hasOwnProperty("message")&&alert(e.response.data.message)}))}},{key:"createEntity",value:function(e,t,n,a){axios.post(T+"education-program/"+e+"/entity",{type:t,value:n}).then(a).catch((function(e){console.log("EducationPrograms create entity service error: "+e)}))}},{key:"deleteEntity",value:function(e,t,n){axios.post(T+"cohort/entity/"+t+"/delete",{type:e}).then(n).catch((function(e){"error"===e.response.data.status&&e.response.data.hasOwnProperty("message")&&alert(e.response.data.message)}))}},{key:"updateEntity",value:function(e,t,n){axios.put(T+"education-program/entity/"+e,t).then(n)}},{key:"updateName",value:function(e,t,n){axios.put(T+"education-program/"+e,t).then(n).catch((function(e){console.log("EducationPrograms update service error: "+e)}))}},{key:"uploadCompetenceDescription",value:function(e,t,n,a){axios.post(T+"education-program/cohort/"+e+"/competence-description",{file:t}).then(n).catch((function(e){console.log("Unable to upload competence description: "+e),a(e)}))}},{key:"removeCompetenceDescription",value:function(e,t){axios.get(T+"education-program/cohort/"+e+"/competence-description/remove").then(t).catch((function(e){console.log("Unable to upload competence description: "+e)}))}},{key:"toggleDisable",value:function(e,t){axios.get(T+"education-program/"+e+"/disable").then(t).catch((function(e){console.log("Unable to toggle disabled state of program: "+e)}))}},{key:"createCohort",value:function(e,t){axios.post(T+"education-program/"+e+"/cohort/create").then(t)}},{key:"updateCohort",value:function(e,t,n){axios.put(T+"education-program/cohort/"+e+"/update",t).then(n)}},{key:"loadCohort",value:function(e,t){axios.get(T+"education-program/cohort/"+e).then(t)}},{key:"deleteCohort",value:function(e,t){axios.delete(T+"education-program/cohort/"+e).then(t).catch((function(e){console.error(e),"error"===e.response.data.status&&e.response.data.hasOwnProperty("message")&&alert(e.response.data.message)}))}},{key:"toggleDisableCohort",value:function(e,t){axios.get(T+"education-program/cohort/"+e+"/disable").then(t).catch((function(e){console.log("Unable to toggle disabled state of cohort: "+e)}))}},{key:"cloneCohort",value:function(e,t){axios.get(T+"education-program/cohort/"+e+"/clone").then(t)}},{key:"loadTranslations",value:function(e,t,n){axios.get(T+"entity/"+e+"/"+t+"/translations").then(n)}}],(n=null)&&L(t.prototype,n),a&&L(t,a),e}(),I=n("RsOY"),M=n.n(I);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B={competence:"competencies",timeslot:"timeslots",resourcePerson:"resourcePersons",resource_person:"resourcePersons",category:"categories"},U=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(n=!(r=A(t).call(this,e))||"object"!==F(r)&&"function"!=typeof r?V(a):r).state={fieldValue:""},n.onFieldChange=n.onFieldChange.bind(V(n)),n.onCreateEntityClick=n.onCreateEntityClick.bind(V(n)),n.onKeyPress=n.onKeyPress.bind(V(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,e),n=t,(r=[{key:"onFieldChange",value:function(e){this.setState({fieldValue:e.target.value})}},{key:"onCreateEntityClick",value:function(){var e=this;D.createEntity(this.props.cohortId,this.props.type,this.state.fieldValue,(function(t){e.props.onEntityCreated(e.props.type,t.data.entity),e.setState({fieldValue:""})}))}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.onCreateEntityClick()}},{key:"render",value:function(){return a.createElement("div",{style:{marginTop:"25px"}},a.createElement("hr",null),a.createElement("div",{className:"form-group"},a.createElement("div",{className:"input-group"},a.createElement("input",{onKeyPress:this.onKeyPress,className:"form-control",type:"text",placeholder:"Name of item to add",onChange:this.onFieldChange,maxLength:"45",value:this.state.fieldValue}),a.createElement("span",{className:"input-group-addon"},this.state.fieldValue.length," / 45")),a.createElement("br",null),a.createElement("span",{className:"btn btn-success",onClick:this.onCreateEntityClick},Lang.get("react.add"))))}}])&&R(n.prototype,r),o&&R(n,o),t}(a.Component);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=["en","nl"],Z=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(n=!(r=K(t).call(this,e))||"object"!==z(r)&&"function"!=typeof r?Q(a):r).state={loading:!1,editMode:!1,fieldValue:"",translations:{},loadingTranslations:!1},n.toEdit=n.toEdit.bind(Q(n)),n.save=n.save.bind(Q(n)),n.onChangeFieldValue=n.onChangeFieldValue.bind(Q(n)),n.onKeyPress=n.onKeyPress.bind(Q(n)),n.loadTranslations=n.loadTranslations.bind(Q(n)),n.addTranslation=n.addTranslation.bind(Q(n)),n.setTranslation=n.setTranslation.bind(Q(n)),n.removeTranslation=n.removeTranslation.bind(Q(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,e),n=t,(r=[{key:"loadTranslations",value:function(){this.setState({loadingTranslations:!0}),D.loadTranslations(this.props.type,this.props.id,function(e){this.setState({translations:e.data.translations,loadingTranslations:!1})}.bind(this))}},{key:"toEdit",value:function(){this.setState({editMode:!0,fieldValue:this.props.label}),this.loadTranslations()}},{key:"save",value:function(){var e=this;this.setState({loading:!0}),D.updateEntity(this.props.id,{type:this.props.type,name:this.state.fieldValue,translations:this.state.translations},(function(t){e.props.onEntityUpdatedName(e.props.id,e.props.type,e.state.fieldValue,t.data.mappedNameField),e.setState({loading:!1,editMode:!1})}))}},{key:"onChangeFieldValue",value:function(e){this.setState({fieldValue:e.target.value})}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.save()}},{key:"addTranslation",value:function(e){if(X.includes(e)&&!this.state.translations.hasOwnProperty(e)){var t=J({},this.state.translations);t[e]="",this.setState({translations:t})}}},{key:"removeTranslation",value:function(e){if(X.includes(e)&&this.state.translations.hasOwnProperty(e)){var t=J({},this.state.translations);delete t[e],this.setState({translations:t})}}},{key:"setTranslation",value:function(e,t){this.setState({translations:J({},this.state.translations,H({},e,t))})}},{key:"render",value:function(){var e=this;return this.state.editMode?a.createElement("div",{className:"buttonListItem expand"},this.state.loading&&a.createElement("div",{className:"loader"}),!this.state.loading&&a.createElement("div",{className:""},a.createElement("div",{className:"input-group"},a.createElement("input",{onKeyPress:this.onKeyPress,type:"text",className:"form-control",maxLength:"45",value:this.state.fieldValue,onChange:this.onChangeFieldValue}),a.createElement("span",{className:"input-group-addon"},this.state.fieldValue.length," / 45")),a.createElement("hr",null),this.state.loadingTranslations&&a.createElement("div",{className:"loader"},"Loading..."),!this.state.loadingTranslations&&a.createElement("div",null,this.renderTranslationButton(),this.renderTranslations()),a.createElement("hr",null),a.createElement("br",null),a.createElement("div",{className:"btn-group btn-group-justified"},a.createElement("span",{className:"btn btn-success",onClick:this.save},Lang.get("react.save")),a.createElement("span",{className:"btn btn-danger",onClick:function(){return e.props.onRemoveClick(e.props.id,e.props.type)}},Lang.get("react.delete"))))):a.createElement("div",{className:"buttonListItem"},a.createElement("span",{className:"defaultButton",onClick:this.toEdit},this.props.label))}},{key:"renderTranslationButton",value:function(){var e=this;return 0===X.filter((function(t){return!e.state.translations.hasOwnProperty(t)})).length?a.createElement("div",{className:"btn-group"},a.createElement("button",{disabled:!0,type:"button",className:"btn btn-default","aria-expanded":"false"},Lang.get("general.translations"))):a.createElement("div",{className:"btn-group"},a.createElement("button",{type:"button",className:"btn btn-default dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false"},Lang.get("general.translations")," ",a.createElement("span",{className:"caret"})),a.createElement("ul",{className:"dropdown-menu"},X.map((function(t){return e.state.translations.hasOwnProperty(t)?null:a.createElement("li",{key:t,onClick:function(){return e.addTranslation(t)}},a.createElement("a",null,Lang.get("general."+t)))}))))}},{key:"renderTranslations",value:function(){var e=this;return 0===Object.keys(this.state.translations).length?null:a.createElement("div",{style:{marginTop:"10px"}},Object.keys(this.state.translations).map((function(t){return a.createElement("div",{className:"input-group",key:t,style:{marginTop:"10px"}},a.createElement("span",{className:"input-group-addon"},Lang.get("general."+t)),a.createElement("input",{type:"text",className:"form-control",value:e.state.translations[t],onChange:function(n){return e.setTranslation(t,n.target.value)}}),a.createElement("span",{className:"input-group-btn"},a.createElement("button",{className:"btn btn-danger",type:"button",onClick:function(){return e.removeTranslation(t)}},a.createElement("span",{className:"glyphicon glyphicon-trash"}))))})))}}])&&W(n.prototype,r),o&&W(n,o),t}(a.Component),ee=n("yzbm");function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function oe(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),e}function ie(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(e){return ae(this,t),ie(this,le(t).call(this,e))}return se(t,e),oe(t,[{key:"removeFromStateArray",value:function(e,t){var n=this;D.deleteEntity(t,e,(function(a){var r=n.getEntityIndex(e,t);n.setState((function(e){return ne({},B[t],M()(e[B[t]],{$splice:[[r,1]]}))}))}))}},{key:"getEntityIndex",value:function(e,t){var n="resourcePerson"===t?"rp":t;return this.state[B[t]].findIndex((function(t){return t[n+"_id"]===parseInt(e)}))}},{key:"onEntityUpdatedName",value:function(e,t,n,a){var r=this.getEntityIndex(e,t);this.setState((function(e){return ne({},B[t],M()(e[B[t]],ne({},r,ne({},a,{$set:n}))))}))}},{key:"onEntityCreated",value:function(e,t){"competence"===e?this.setState((function(e){return{competencies:M()(e.competencies,{$push:[t]})}})):"timeslot"===e?this.setState((function(e){return{timeslots:M()(e.timeslots,{$push:[t]})}})):"resourcePerson"===e?this.setState((function(e){return{resourcePersons:M()(e.resourcePersons,{$push:[t]})}})):"category"===e&&this.setState((function(e){return{categories:M()(e.categories,{$push:[t]})}}))}}]),t}(a.Component),pe=function(e){function t(e){var n;return ae(this,t),(n=ie(this,le(t).call(this,e))).state=Object.assign({},e,{uploadedText:""}),n}return se(t,e),oe(t,[{key:"onDrop",value:function(e){var t=this,n=new FileReader;n.addEventListener("load",(function(){t.setState({uploadedText:" - uploading..."}),D.uploadCompetenceDescription(t.props.cohortId,n.result,(function(e){t.setState({competence_description:e.data.competence_description,uploadedText:" - successfully uploaded file"}),setTimeout((function(){return t.setState({uploadedText:""})}),4e3)}),(function(e){413===e.response.status?t.setState({uploadedText:" - the file was too large, try to make it smaller"}):t.setState({uploadedText:" - error occurred while uploading, try again later"})}))}),!1),n.readAsDataURL(e[0])}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"panel panel-default"},a.createElement("div",{className:"panel-body"},a.createElement("h4",null,Lang.get("react.competencies")),a.createElement("div",{className:"form-group"},this.state.competencies.map((function(t){return a.createElement("div",{key:t.competence_id},a.createElement(Z,{type:"competence",id:t.competence_id,label:t.competence_label,onRemoveClick:e.removeFromStateArray.bind(e),onEntityUpdatedName:e.onEntityUpdatedName.bind(e)}))})),a.createElement(U,{onEntityCreated:this.onEntityCreated.bind(this),type:"competence",cohortId:this.props.cohortId}),a.createElement("h5",null,Lang.get("react.competence-description")),a.createElement("div",null,a.createElement("span",null,Lang.get("react.current-description"),":  ",null!==this.state.competence_description&&this.state.competence_description.has_data&&a.createElement("span",null,a.createElement("a",{href:this.state.competence_description["download-url"]},Lang.get("react.download"))," - ",a.createElement("a",{onClick:function(){D.removeCompetenceDescription(e.props.programId,(function(){e.setState({competence_description:null})}))}},Lang.get("react.remove"))),(null===this.state.competence_description||!this.state.competence_description.has_data)&&a.createElement("span",null,Lang.get("react.none")),this.state.uploadedText),a.createElement(ee.a,{className:"dropzone",accept:"application/pdf",multiple:!1,onDrop:this.onDrop.bind(this)},(function(e){var t=e.getRootProps,n=e.getInputProps;return a.createElement("div",t({className:"dropzone"}),a.createElement("input",n({value:""})),a.createElement("span",null,Lang.get("react.upload-instructions")))})))))))}}]),t}(ue),de=function(e){function t(e){var n;return ae(this,t),(n=ie(this,le(t).call(this,e))).state=Object.assign({},e),n}return se(t,e),oe(t,[{key:"render",value:function(){var e=this;return a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"panel panel-default"},a.createElement("div",{className:"panel-body"},a.createElement("h4",null,Lang.get("react.categories")),a.createElement("div",{className:"form-group"},this.state.timeslots.map((function(t){return a.createElement("div",{key:t.timeslot_id},a.createElement(Z,{type:"timeslot",id:t.timeslot_id,label:t.timeslot_text,onRemoveClick:e.removeFromStateArray.bind(e),onEntityUpdatedName:e.onEntityUpdatedName.bind(e)}))})),a.createElement(U,{onEntityCreated:this.onEntityCreated.bind(this),type:"timeslot",cohortId:this.props.cohortId})))))}}]),t}(ue),me=function(e){function t(e){var n;return ae(this,t),(n=ie(this,le(t).call(this,e))).state=Object.assign({},e),n}return se(t,e),oe(t,[{key:"render",value:function(){var e=this;return a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"panel panel-default"},a.createElement("div",{className:"panel-body"},a.createElement("h4",null,Lang.get("react.resourceperson")),a.createElement("div",{className:"form-group"},this.state.resourcePersons.map((function(t){return a.createElement("div",{key:t.rp_id},a.createElement(Z,{type:"resourcePerson",id:t.rp_id,label:t.person_label,onRemoveClick:e.removeFromStateArray.bind(e),onEntityUpdatedName:e.onEntityUpdatedName.bind(e)}))})),a.createElement(U,{onEntityCreated:this.onEntityCreated.bind(this),type:"resourcePerson",cohortId:this.props.cohortId})))))}}]),t}(ue),fe=function(e){function t(e){var n;return ae(this,t),(n=ie(this,le(t).call(this,e))).state=Object.assign({},e),n}return se(t,e),oe(t,[{key:"render",value:function(){var e=this;return a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"panel panel-default"},a.createElement("div",{className:"panel-body"},a.createElement("h4",null,Lang.get("react.categories")),a.createElement("div",{className:"form-group"},this.state.categories.map((function(t){return a.createElement("div",{key:t.category_id},a.createElement(Z,{type:"category",id:t.category_id,label:t.category_label,onRemoveClick:e.removeFromStateArray.bind(e),onEntityUpdatedName:e.onEntityUpdatedName.bind(e)}))})),a.createElement(U,{onEntityCreated:this.onEntityCreated.bind(this),type:"category",cohortId:this.props.cohortId})))))}}]),t}(ue);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ye(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ye(this,be(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return a.createElement("div",{className:"panel panel-default"},a.createElement("div",{className:"panel-body"},this.props.children))}}])&&he(n.prototype,r),o&&he(n,o),t}(a.Component);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function je(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=je(this,ke(t).call(this))).state=Object.assign({},e,{selectedCohortId:null,loading:!1,showDisabledCohorts:!1,isCloning:!1}),n.autoUpdaterTimeout=null,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(t,e),n=t,(r=[{key:"cohortIndex",value:function(e){return this.state.cohorts.findIndex((function(t){return parseInt(t.id)===parseInt(e)}))}},{key:"updateCohort",value:function(){var e=this;clearTimeout(this.autoUpdaterTimeout),this.autoUpdaterTimeout=setTimeout((function(){D.updateCohort(e.state.selectedCohortId,e.state.cohorts[e.cohortIndex(e.state.selectedCohortId)],(function(){}))}),500)}},{key:"loadCohort",value:function(e){var t=this;this.setState({loading:!0}),D.loadCohort(e,(function(n){var a=t.cohortIndex(e);a>=0?t.setState({cohorts:M()(t.state.cohorts,Oe({},a,{$set:n.data}))}):t.setState({cohorts:M()(t.state.cohorts,{$push:[n.data]})}),t.setState({loading:!1})}))}},{key:"cloneCohort",value:function(e){var t=this;this.setState({isCloning:!0}),D.cloneCohort(e,(function(e){var n=t.state.cohorts.slice();n.push(e.data),t.setState({cohorts:n,isCloning:!1})}))}},{key:"render",value:function(){var e=this,t=this.state.cohorts[this.cohortIndex(this.state.selectedCohortId)];return a.createElement("div",null,a.createElement("h3",null,Lang.get("react.cohorts")),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2"},a.createElement("a",{onClick:function(){return D.createCohort(e.props.programId,(function(t){var n=e.state.cohorts.slice();n.push(t.data),e.setState({cohorts:n})}))}},Lang.get("react.add-cohort"))),a.createElement("div",{className:"col-md-2 col-md-offset-8"},a.createElement("a",{className:"btn btn-info pull-right",onClick:function(){return e.setState({showDisabledCohorts:!e.state.showDisabledCohorts})}},this.state.showDisabledCohorts&&Lang.get("react.cohorts-hide-disabled"),!this.state.showDisabledCohorts&&Lang.get("react.cohorts-show-disabled")))),a.createElement("div",{className:"row"},this.state.cohorts.filter((function(e){return!e.disabled})).map((function(t){var n="defaultButton list ";return e.state.selectedCohortId===t.id&&(n+="red"),a.createElement("div",{className:"col-md-4",key:t.id},a.createElement("span",{className:n,onClick:function(){return e.setState({loading:!0,selectedCohortId:t.id},(function(){return e.loadCohort(t.id)}))}},t.name))})),this.state.showDisabledCohorts&&this.state.cohorts.filter((function(e){return e.disabled})).map((function(t){var n="defaultButton list ";return e.state.selectedCohortId===t.id?n+="red":n+="yellow",a.createElement("div",{className:"col-md-4",key:t.id},a.createElement("span",{className:n,style:{opacity:"0.6"},onClick:function(){return e.setState({loading:!0,selectedCohortId:t.id},(function(){return e.loadCohort(t.id)}))}},t.name))}))),a.createElement("hr",null),null!==this.state.selectedCohortId&&!1===this.state.loading&&a.createElement("div",null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-8"},a.createElement(Ee,null,a.createElement("h4",null,Lang.get("react.cohort-details")),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"cohort-name"},Lang.get("react.cohort-name")),a.createElement("input",{name:"cohort-name",type:"text",className:"form-control",value:t.name,onChange:function(n){e.setState({cohorts:M()(e.state.cohorts,Oe({},e.cohortIndex(t.id),{name:{$set:n.target.value}}))}),e.updateCohort()}})),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"cohort-desc"},Lang.get("react.cohort-desc")),a.createElement("input",{name:"cohort-desc",type:"text",className:"form-control",value:t.description,onChange:function(n){e.setState({cohorts:M()(e.state.cohorts,Oe({},e.cohortIndex(t.id),{description:{$set:n.target.value}}))}),e.updateCohort()}}),a.createElement("div",{className:"form-group"},a.createElement("label",{htmlFor:"cohort-feedback"},Lang.get("react.cohort-feedback")),a.createElement("input",{name:"cohort-feedback-chance",type:"text",className:"form-control",value:t.feedback_chance,onChange:function(n){e.setState({cohorts:M()(e.state.cohorts,Oe({},e.cohortIndex(t.id),{feedback_chance:{$set:n.target.value}}))}),e.updateCohort()}})))),a.createElement("div",{className:"col-md-2 col-md-offset-6 text-right"},this.state.isCloning&&a.createElement("button",{onClick:function(){return e.cloneCohort(t.id)},className:"btn btn-success"},"..."),!this.state.isCloning&&a.createElement("button",{onClick:function(){return e.cloneCohort(t.id)},className:"btn btn-success"},Lang.get("react.clone")," cohort"))),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3"},a.createElement("a",{onClick:function(){return D.toggleDisableCohort(t.id,(function(n){if("success"===n.data.status){var a=e.cohortIndex(t.id);e.setState({cohorts:M()(e.state.cohorts,Oe({},a,{disabled:{$set:n.data.disabled}}))})}}))}},t.disabled?Lang.get("react.cohort-enable"):Lang.get("react.cohort-disable"))),a.createElement("div",{className:"col-md-3"},a.createElement("a",{disabled:t.canBeDeleted,onClick:function(){t.canBeDeleted&&D.deleteCohort(t.id,(function(n){if("success"===n.data.status){var a=e.cohortIndex(t.id);e.setState({selectedCohortId:null}),e.setState({cohorts:M()(e.state.cohorts,{$splice:[[a,1]]})})}}))}},t.canBeDeleted?Lang.get("react.cohort-delete"):Lang.get("react.cohort-delete-block"))))))),a.createElement("br",null),a.createElement("div",{className:"row"},1===this.props.programType&&a.createElement("div",null,a.createElement(pe,{competencies:t.competencies,competence_description:t.competence_description,programId:this.props.programId,cohortId:this.state.selectedCohortId}),a.createElement(de,{timeslots:t.timeslots,programId:this.props.programId,cohortId:this.state.selectedCohortId}),a.createElement(me,{resourcePersons:t.resource_persons,programId:this.props.programId,cohortId:this.state.selectedCohortId})),2===this.props.programType&&a.createElement("div",null,a.createElement(fe,{categories:t.categories,programId:this.props.programId,cohortId:this.state.selectedCohortId}),a.createElement(me,{resourcePersons:t.resource_persons,programId:this.props.programId,cohortId:this.state.selectedCohortId})))))}}])&&Se(n.prototype,r),o&&Se(n,o),t}(a.Component);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(n=!(r=xe(t).call(this,e))||"object"!==Ce(r)&&"function"!=typeof r?Le(a):r).state={loading:!0,ep_name:"",disabled:!1,cohorts:[]},n.autoUpdaterTimeout=null,n.programOnNameChange=n.programOnNameChange.bind(Le(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),D.getEditableEducationProgram((function(t){e.setState(t.data),e.setState({loading:!1})}),this.props.id)}},{key:"componentDidUpdate",value:function(e,t){var n=this;e.id!==this.props.id&&(this.setState({loading:!0}),D.getEditableEducationProgram((function(e){n.setState(e.data),n.setState({loading:!1})}),this.props.id))}},{key:"programOnNameChange",value:function(e){var t,n,a,r=this;clearTimeout(this.autoUpdaterTimeout),this.setState((t={},n=e.target.getAttribute("name"),a=e.target.value,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t)),this.autoUpdaterTimeout=setTimeout((function(){D.updateName(r.props.id,{ep_name:r.state.ep_name},(function(e){r.props.programOnNameChange(r.props.id,e.data.program.ep_name)}))}),500)}},{key:"onClickToggleDisableProgram",value:function(e){var t=this;D.toggleDisable(e,(function(e){"success"===e.data.status&&t.setState({disabled:e.data.disabled})}))}},{key:"render",value:function(){var e=this;if(this.state.loading)return a.createElement("div",{className:"loader"},"Loading...");var t=this.state;return a.createElement("div",null,a.createElement("div",null,a.createElement("h4",null,Lang.get("react.program-details")),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3"},a.createElement("div",{className:"form-group"},a.createElement("label",null,Lang.get("react.educprogram-name"),a.createElement("input",{type:"text",className:"form-control",name:"ep_name",value:t.ep_name,onChange:this.programOnNameChange})))),a.createElement("div",{className:"col-md-3"},a.createElement("a",{onClick:function(){return e.onClickToggleDisableProgram(e.props.id)}},t.disabled?Lang.get("react.program-enable"):Lang.get("react.program-disable"))),a.createElement("div",{className:"col-md-3"},a.createElement("a",{disabled:t.canBeDeleted,onClick:function(){t.canBeDeleted&&D.deleteEducationProgram(t.ep_id,(function(n){"success"===n.data.status&&e.props.onDelete(t.ep_id)}))}},t.canBeDeleted?Lang.get("react.program-delete"):Lang.get("react.program-delete-blocked"))))),a.createElement("hr",null),a.createElement(Ne,{programId:t.ep_id,cohorts:t.cohorts,programType:t.eptype_id}))}}])&&Pe(n.prototype,r),o&&Pe(n,o),t}(a.Component);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ve=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(n=!(r=Fe(t).call(this,e))||"object"!==Ie(r)&&"function"!=typeof r?Re(a):r).state={loading:!1,programs:[],selectedProgramId:null,newProgramType:1,newProgramName:"",newProgramLoading:!1},n.updateProgramName=n.updateProgramName.bind(Re(n)),n.onChangeEducationProgramType=n.onChangeEducationProgramType.bind(Re(n)),n.onClickAddEducationProgram=n.onClickAddEducationProgram.bind(Re(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),D.getEducationPrograms((function(t){e.setState({programs:t.data,loading:!1})}))}},{key:"updateProgramName",value:function(e,t){var n,a,r,o=this.state.programs.map((function(e){return e.ep_id})).indexOf(e);this.setState({programs:M()(this.state.programs,(n={},a=o,r={ep_name:{$set:t}},a in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,n))})}},{key:"onChangeEducationProgramType",value:function(e){this.setState({newProgramType:e.target.value})}},{key:"onClickAddEducationProgram",value:function(e){var t=this;this.setState({newProgramLoading:!0}),D.createEducationProgram({ep_name:this.state.newProgramName,eptype_id:this.state.newProgramType},(function(e){t.setState({newProgramName:"",newProgramLoading:!1,programs:M()(t.state.programs,{$push:[e.data.program]})})}))}},{key:"onDeleteEducationProgram",value:function(e){var t=this.state.programs.findIndex((function(t){return parseInt(t.ep_id)===parseInt(e)}));if(t<0)throw"Unknown program id "+e;this.setState({selectedProgramId:null}),this.setState({programs:M()(this.state.programs,{$splice:[[t,1]]})})}},{key:"render",value:function(){var e=this;return this.state.loading?a.createElement("div",{className:"loader"},"Loading..."):a.createElement("div",null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2"},a.createElement("div",{className:"panel panel-default"},a.createElement("div",{className:"panel-body"},a.createElement("h4",null,Lang.get("react.educationprogram")),a.createElement("p",null,Lang.get("react.educprogram-manage")),this.state.programs.map((function(t){var n="defaultButton list";return e.state.selectedProgramId===t.ep_id&&(n+=" red"),a.createElement("span",{className:n,key:t.ep_id,onClick:function(){return e.setState({selectedProgramId:t.ep_id})}},t.ep_name)})),a.createElement("hr",null),this.renderCreateForm()))),a.createElement("div",{className:"col-md-10 "},this.renderEditForm())))}},{key:"renderCreateForm",value:function(){var e=this;return this.state.newProgramLoading?a.createElement("div",{className:"loader"},"Loading..."):a.createElement("div",null,a.createElement("h5",{style:{marginTop:25}},Lang.get("react.educprogram-add")),a.createElement("div",{className:"form-group"},a.createElement("input",{className:"form-control",type:"text",value:this.state.newProgramName,placeholder:Lang.get("react.educprogram-name"),onChange:function(t){return e.setState({newProgramName:t.target.value})}}),a.createElement("br",null),a.createElement("select",{value:this.state.newProgramType,onChange:this.onChangeEducationProgramType,className:"form-control"},a.createElement("option",{value:"1"},Lang.get("react.acting")),a.createElement("option",{value:"2"},Lang.get("react.producing"))),a.createElement("br",null),a.createElement("span",{className:"btn btn-success fill",onClick:this.onClickAddEducationProgram},Lang.get("react.add"))))}},{key:"renderEditForm",value:function(){return null===this.state.selectedProgramId?a.createElement("h5",null,Lang.get("react.none-selected")):a.createElement(De,{id:this.state.selectedProgramId,programOnNameChange:this.updateProgramName,onDelete:this.onDeleteEducationProgram.bind(this)})}}])&&Me(n.prototype,r),o&&Me(n,o),t}(a.Component);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ue(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ue(this,ze(t).call(this,e))).state={visible:!1},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props.activity,n="fa fa-arrow-circle-o-"+(this.state.visible?"up":"down"),a={paddingLeft:10,paddingRight:10,marginLeft:10,marginRight:10};return r.a.createElement("tr",{className:"activityExport"},r.a.createElement("td",null,r.a.createElement("a",{style:a,href:t.url},r.a.createElement("i",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"})),r.a.createElement("a",{style:a,onClick:function(){return confirm(Lang.get("react.delete-confirm"))?window.location.href="/producing/process/delete/"+t.id:null}},r.a.createElement("i",{className:"glyphicon glyphicon-trash","aria-hidden":"true"}))),r.a.createElement("td",null,t.duration),t.description.length>30&&r.a.createElement("td",null,r.a.createElement("i",{onClick:function(){return e.setState({visible:!e.state.visible})},className:n})),r.a.createElement("td",{colSpan:t.description.length<=30?2:1},t.description.length>30&&r.a.createElement("span",null,this.state.visible&&r.a.createElement("span",null,t.description),!this.state.visible&&r.a.createElement("span",null,t.description.substr(0,30),"...")),t.description.length<=30&&t.description),r.a.createElement("td",{style:{wordBreak:"break-all",width:"15%"}},t.resourceDetail),r.a.createElement("td",null,t.category),r.a.createElement("td",null,t.difficulty),r.a.createElement("td",null,t.status),r.a.createElement("td",null,t.chain),r.a.createElement("td",null,null!==t.feedback&&null!==t.feedback.fb_id&&r.a.createElement("a",{href:"/producing/feedback/".concat(t.feedback.fb_id)},"Feedback")))}}])&&Be(n.prototype,a),o&&Be(n,o),t}(r.a.Component);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ge=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(n=!(r=We(t).call(this,e))||"object"!==Je(r)&&"function"!=typeof r?Ke(a):r).handleClick=n.handleClick.bind(Ke(n)),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,e),n=t,(a=[{key:"handleClick",value:function(){this.props.onClickHandler(this.props.type,this.props.rule)}},{key:"render",value:function(){return r.a.createElement("label",null,r.a.createElement("input",{style:{display:"none"},type:"checkbox",value:this.props.rule,onChange:this.handleClick}),r.a.createElement("span",null,this.props.rule," "))}}])&&He(n.prototype,a),o&&He(n,o),t}(r.a.Component),Xe=n("vDqi"),Ze=n.n(Xe);function et(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var tt=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.includeFeedback=n,this.activities=a,this.outputData=""}var t,n,a;return t=e,(n=[{key:"getFeedbackUrl",value:function(e){return"https://"+window.location.hostname+"/producing/feedback/"+e}},{key:"csv",value:function(){var e=this,t=Object.keys(this.activities[0]),n=["id","url","difficultyValue","hours"];n.forEach((function(e){t.splice(t.indexOf(e),1)}));var a=t.map((function(e){return exportTranslatedFieldMapping[e]}));this.output(a.join(";")+"\n"),this.activities.forEach((function(a,r){var o=t.map((function(t){if(-1===n.indexOf(t))return null===a[t]||"null"===a[t]?"":"feedback"===t&&a[t]?e.getFeedbackUrl(a[t].fb_id):a[t]})).map(e.escapeCsv).join(";");e.output(r<e.activities.length?o+"\n":o)}))}},{key:"txt",value:function(){var e=this,t=Object.keys(this.activities[0]),n=["id","url","difficultyValue","hours"];n.forEach((function(e){t.splice(t.indexOf(e),1)})),this.activities.forEach((function(a,r){var o=t.map((function(t){if(-1===n.indexOf(t))return"description"===t?E.a.capitalize(exportTranslatedFieldMapping[t])+": \n\t"+a[t]+" \n":null===a[t]||"null"===a[t]?E.a.capitalize(exportTranslatedFieldMapping[t])+": -":"feedback"===t&&a[t]?e.includeFeedback?E.a.capitalize(exportTranslatedFieldMapping[t])+": \n\t"+"".concat(Lang.get("activity.feedback.why-hard"),": ")+(a[t].notfinished?"".concat(a[t].notfinished,"."):"-")+"\n\t"+"".concat(Lang.get("activity.feedback.how-help"),": ")+(a[t].support_requested?"".concat(a[t].supported_provided_wp,"."):"Nee.")+"\n\t"+"".concat(Lang.get("activity.feedback.happy-with-progress"),": ")+(2===a[t].progress_satisfied?"Ja.":"Nee.")+"\n\t"+"".concat(Lang.get("activity.feedback.own-initiative"),": ")+(a[t].initiative?"\n\t\t".concat(a[t].initiative,"."):"-")+"\n\t"+"".concat(Lang.get("activity.feedback.next-steps"),": ")+(a[t].nextstep_self?"\n\t\t".concat(a[t].nextstep_self,"."):"-")+"\n\t"+"".concat(Lang.get("activity.feedback.help-needed"),": ")+(a[t].support_needed_wp?"\n\t\t".concat(a[t].support_needed_wp,"."):"-")+"\n\t"+"".concat(Lang.get("activity.feedback.help-school-needed"),": ")+(a[t].support_needed_ed?"\n\t\t".concat(a[t].support_needed_ed,"."):"-")+"\n\tUrl: "+e.getFeedbackUrl(a[t].fb_id):E.a.capitalize(exportTranslatedFieldMapping[t])+": "+e.getFeedbackUrl(a[t].fb_id):E.a.capitalize(exportTranslatedFieldMapping[t])+": "+a[t]})).join("\n");e.output(r<e.activities.length?o+"\n______________\n\n":o)}))}},{key:"mail",value:function(e,t,n){this.txt(),Xe.post("/activity-export-mail",{txt:this.outputData,email:e,comment:t}).then(n).catch(n)}},{key:"output",value:function(e){this.outputData+=e}},{key:"download",value:function(){var e=document.createElement("a");e.href="data:attachment/"+this.type+","+encodeURIComponent(this.outputData),e.target="_blank",e.download="export."+this.type,document.body.appendChild(e),e.click()}},{key:"escapeCsv",value:function(e){return'"'+e.replace(/"/g,'""')+'"'}}])&&et(t.prototype,n),a&&et(t,a),e}();n("5Buo");function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lt=function(e){function t(e){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=rt(t).call(this,e),(n=!r||"object"!==nt(r)&&"function"!=typeof r?ot(a):r).mode=window.activityProducingTableMode,n.isMini=function(){return"mini"===n.mode},n.isDetail=function(){return"detail"===n.mode};var o=O()(),i=O()();return window.activities.forEach((function(e){(O()(e.date,"DD-MM-YYYY")<o||void 0===o)&&(o=O()(e.date,"DD-MM-YYYY")),(O()(e.date,"DD-MM-YYYY")>i||void 0===i)&&(i=O()(e.date,"DD-MM-YYYY"))})),n.state={activities:window.activities,filters:n.buildFilter(window.activities),exports:["csv","txt","email","word"],selectedExport:"txt",exportFeedback:!1,email:"",emailComment:"",emailAlert:null,startDate:o.toDate(),endDate:i.toDate()},n.updateFilter=n.updateFilter.bind(ot(n)),n.exportHandler=n.exportHandler.bind(ot(n)),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(t,e),n=t,(a=[{key:"buildFilter",value:function(e){var t={duration:{rules:[],selectedRules:[]},resourceDetail:{rules:[],selectedRules:[]},category:{rules:[],selectedRules:[]},difficulty:{rules:[],selectedRules:[]},chain:{rules:[],selectedRules:[]}};return e.map((function(e){var n=function(e,n){-1===t[e].rules.indexOf(n)&&t[e].rules.push(n)};n("duration",e.duration),n("resourceDetail",e.resourceDetail),n("category",e.category),n("difficulty",e.difficulty),n("chain",e.chain)})),t.duration.rules.sort(),t.resourceDetail.rules.sort(),t.category.rules.sort(),t.difficulty.rules.sort(),t.chain.rules.sort(),t}},{key:"updateFilter",value:function(e,t){var n=E.a.cloneDeep(this.state.filters),a=n[e].selectedRules.indexOf(t);a>-1?n[e].selectedRules.splice(a,1):n[e].selectedRules.push(t),this.setState({filters:n})}},{key:"filterActivities",value:function(e){var t=this;return e.filter((function(e){return 0===t.state.filters.duration.selectedRules.length||t.state.filters.duration.selectedRules.indexOf(e.duration)>-1})).filter((function(e){return 0===t.state.filters.resourceDetail.selectedRules.length||t.state.filters.resourceDetail.selectedRules.indexOf(e.resourceDetail)>-1})).filter((function(e){return 0===t.state.filters.category.selectedRules.length||t.state.filters.category.selectedRules.indexOf(e.category)>-1})).filter((function(e){return 0===t.state.filters.difficulty.selectedRules.length||t.state.filters.difficulty.selectedRules.indexOf(e.difficulty)>-1})).filter((function(e){return 0===t.state.filters.chain.selectedRules.length||t.state.filters.chain.selectedRules.indexOf(e.chain)>-1})).filter((function(e){return O()(e.date,"DD-MM-YYYY").isSameOrAfter(t.state.startDate)&&O()(e.date,"DD-MM-YYYY").isSameOrBefore(t.state.endDate)}))}},{key:"groupByDay",value:function(e){var t={};return e.forEach((function(e){t.hasOwnProperty(e.date)||(t[e.date]=[]),t[e.date].push(e)})),t}},{key:"exportHandler",value:function(){var e=this,t=new tt(this.state.selectedExport,this.state.exportFeedback,this.filterActivities(this.state.activities));if("email"===this.state.selectedExport)this.setState({emailAlert:void 0}),t.mail(this.state.email,this.state.emailComment,(function(t){t.hasOwnProperty("data")&&t.data.status,e.setState({email:"",emailComment:"",emailAlert:!0}),setTimeout((function(){return e.setState({emailAlert:null})}),3e3)}));else if("word"===this.state.selectedExport){t.txt();var n=t.outputData;axios.post("/activity-export-doc",{exportText:n}).then((function(e){window.location.href=e.data.download}))}else t[this.state.selectedExport](),t.download()}},{key:"render",value:function(){var e=this,t=this.filterActivities(this.state.activities),n=this.groupByDay(t);return r.a.createElement("div",null,this.isDetail()&&this.renderFilter(),this.isDetail()&&this.renderExport(),this.isMini()&&r.a.createElement("a",{href:window.progressLink},Lang.get("react.progress-link-label")),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table blockTable"},r.a.createElement("thead",{className:"blue_tile"},r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,Lang.get("react.time")),r.a.createElement("td",{colSpan:2},Lang.get("react.description")),r.a.createElement("td",null,Lang.get("react.aid")),r.a.createElement("td",null,Lang.get("react.category")),r.a.createElement("td",null,Lang.get("react.complexity")),r.a.createElement("td",null,Lang.get("react.status")),r.a.createElement("td",null,Lang.get("react.chain")),r.a.createElement("td",null))),r.a.createElement("tbody",null,Object.keys(n).map((function(t){var a=n[t].sort((function(e,t){return e.id-t.id})),o=e.calculateStatisticsForActivities(a),i=r.a.createElement("td",null,Lang.get("activity.hours"),": ",o.totalHours.toFixed(2));return o.totalHours<1&&(i=r.a.createElement("td",null,Lang.get("activity.minutes"),": ",(60*o.totalHours).toFixed(2))),[r.a.createElement("tr",{key:t,style:{backgroundColor:"rgba(0,161,226, 0.45)",color:"rgba(255,255,255)",fontWeight:"bold"}},r.a.createElement("td",null,t),i,r.a.createElement("td",null,Lang.get("activity.difficulty"),": ",o.difficulty),r.a.createElement("td",null,Lang.get("activity.mostOftenCategory"),": ",o.mostOftenCategory),r.a.createElement("td",{colSpan:8})),a.map((function(e){return r.a.createElement(qe,{key:e.id,activity:e})}))]}))))))}},{key:"renderFilter",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",{style:{cursor:"pointer"},onClick:function(){$(".filters").slideToggle()}},r.a.createElement("i",{className:"fa fa-arrow-circle-o-down","aria-hidden":"true"})," ",Lang.get("react.filters")),r.a.createElement("div",{className:"filters row",style:{display:"none"}},r.a.createElement("div",{className:"date col-md-2"},r.a.createElement("h4",null,Lang.get("react.date")),r.a.createElement("div",null,r.a.createElement("strong",null,Lang.get("react.startdate"),":"),r.a.createElement("br",null),r.a.createElement(j.a,{className:"form-control",selected:this.state.startDate,dateFormat:"dd/MM/yyyy",onChange:function(t){return e.setState({startDate:t})}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,Lang.get("react.enddate"),":"),r.a.createElement("br",null),r.a.createElement(j.a,{className:"form-control",selected:this.state.endDate,dateFormat:"dd/MM/yyyy",onChange:function(t){return e.setState({endDate:t})}})),r.a.createElement("div",{style:{clear:"both"}})),r.a.createElement("div",{className:"duration col-md-2"},r.a.createElement("h4",null,Lang.get("react.time")),r.a.createElement("div",{className:"buttons"},this.state.filters.duration.rules.map((function(t){return r.a.createElement(Ge,{key:t,type:"duration",onClickHandler:e.updateFilter,rule:t,activated:e.state.filters.duration.selectedRules.indexOf(t)>-1})}))),r.a.createElement("div",{style:{clear:"both"}})),r.a.createElement("div",{className:"resourceDetail col-md-2"},r.a.createElement("h4",null,Lang.get("react.aid")),r.a.createElement("div",{className:"buttons"},this.state.filters.resourceDetail.rules.map((function(t){return r.a.createElement(Ge,{key:t,type:"resourceDetail",onClickHandler:e.updateFilter,rule:t,activated:e.state.filters.resourceDetail.selectedRules.indexOf(t)>-1})}))),r.a.createElement("div",{style:{clear:"both"}})),r.a.createElement("div",{className:"duration col-md-2"},r.a.createElement("h4",null,Lang.get("react.category")),r.a.createElement("div",{className:"buttons"},this.state.filters.category.rules.map((function(t){return r.a.createElement(Ge,{key:t,type:"category",onClickHandler:e.updateFilter,rule:t,activated:e.state.filters.category.selectedRules.indexOf(t)>-1})}))),r.a.createElement("div",{style:{clear:"both"}})),r.a.createElement("div",{className:"duration col-md-2"},r.a.createElement("h4",null,Lang.get("react.complexity")),r.a.createElement("div",{className:"buttons"},this.state.filters.difficulty.rules.map((function(t){return r.a.createElement(Ge,{key:t,type:"difficulty",onClickHandler:e.updateFilter,rule:t,activated:e.state.filters.difficulty.selectedRules.indexOf(t)>-1})}))),r.a.createElement("div",{style:{clear:"both"}})),r.a.createElement("div",{className:"duration col-md-2"},r.a.createElement("h4",null,Lang.get("react.chain")),r.a.createElement("div",{className:"buttons"},this.state.filters.chain.rules.map((function(t){return r.a.createElement(Ge,{key:t,type:"chain",onClickHandler:e.updateFilter,rule:t,activated:e.state.filters.chain.selectedRules.indexOf(t)>-1})}))),r.a.createElement("div",{style:{clear:"both"}}))),r.a.createElement("br",null))}},{key:"renderExport",value:function(){var e=this;return r.a.createElement("div",{className:"export",style:{paddingBottom:"15px"}},r.a.createElement("label",null,Lang.get("react.export-to")," ",r.a.createElement("select",{onChange:function(t){e.setState({selectedExport:t.target.value})},defaultValue:this.state.selectedExport},this.state.exports.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),"  ",r.a.createElement("br",null),r.a.createElement("label",{style:{marginTop:"5px"}},r.a.createElement("input",{type:"checkbox",checked:this.state.exportFeedback,onChange:function(){return e.setState({exportFeedback:!e.state.exportFeedback})}})," ",Lang.get("react.with-feedback")),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-info",onClick:this.exportHandler,disabled:0===this.state.activities.length||"email"===this.state.selectedExport&&(!this.state.email.includes("@")||!this.state.email.includes("."))},Lang.get("react.export")),r.a.createElement("br",null),"email"===this.state.selectedExport&&r.a.createElement("div",{style:{maxWidth:"400px"}},r.a.createElement("label",null,Lang.get("react.mail-to"),": ",r.a.createElement("input",{type:"email",className:"form-control",onChange:function(t){return e.setState({email:t.target.value})},value:this.state.email})),r.a.createElement("br",null),r.a.createElement("label",null,Lang.get("react.mail-comment"),": ",r.a.createElement("textarea",{className:"form-control",onChange:function(t){return e.setState({emailComment:t.target.value})},value:this.state.emailComment})),void 0===this.state.emailAlert&&r.a.createElement("div",{className:"alert alert-info",role:"alert"},Lang.get("react.mail.sending")),!0===this.state.emailAlert&&r.a.createElement("div",{className:"alert alert-success",role:"alert"},Lang.get("react.mail.sent")),!1===this.state.emailAlert&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},Lang.get("react.mail.failed"))))}},{key:"calculateStatisticsForActivities",value:function(e){var t={totalHours:null,difficulty:null,mostOftenCategory:null,mostOftenCategoryCount:0,categories:{}};return e.forEach((function(e){t.totalHours+=e.hours,t.difficulty+=e.difficultyValue,t.categories.hasOwnProperty(e.category)||(t.categories[e.category]=0),t.categories[e.category]+=1})),e.length>0&&(t.difficulty=(t.difficulty/e.length).toFixed(2)),Object.keys(t.categories).forEach((function(e){var n=t.categories[e];n>t.mostOftenCategoryCount&&(t.mostOftenCategory=e,t.mostOftenCategoryCount=n)})),t}}])&&at(n.prototype,a),o&&at(n,o),t}(r.a.Component);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ut(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ut(this,pt(t).call(this,e))).state={startDate:O()(e.earliest,"YYYY/MM/DD").toDate(),endDate:O()(e.latest,"YYYY/MM/DD").toDate()},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-2"},a.createElement("strong",null,Lang.get("react.startdate")),a.createElement("br",null),a.createElement(j.a,{className:"form-control",selected:this.state.startDate,dateFormat:"dd/MM/yyyy",onChange:function(t){return e.setState({startDate:t})}}),a.createElement("br",null),a.createElement("br",null),a.createElement("strong",null,Lang.get("react.enddate")),a.createElement("br",null),a.createElement(j.a,{className:"form-control",selected:this.state.endDate,endDate:this.state.endDate,dateFormat:"dd/MM/yyyy",onChange:function(t){return e.setState({endDate:t})}})),a.createElement("div",{className:"col-md-1"},a.createElement("a",{href:this.props.url+"?startDate="+O()(this.state.startDate).unix()+"&endDate="+O()(this.state.endDate).unix(),target:"_blank",className:"btn btn-info",role:"button"},Lang.get("react.export"))))}}])&&ct(n.prototype,r),o&&ct(n,o),t}(a.Component),ft=n("ANjH"),gt=n("/MKj"),ht=n("Ty5D"),yt=n("55Ip"),bt=n("XiPH"),vt=new bt.b.Entity("tips"),Et=new bt.b.Entity("cohorts"),wt=new bt.b.Entity("coupledStatistics"),Ot=new bt.b.Entity("statistics"),St=new bt.b.Entity("statisticVariables"),jt=new bt.b.Entity("educationProgramTypes",{},{idAttribute:"eptype_id"}),kt=new bt.b.Entity("educationPrograms",{},{idAttribute:"ep_id"}),_t=new bt.b.Entity("moments");vt.define({enabled_cohorts:[Et],coupled_statistics:[wt],moments:[_t]}),Ot.define({statistic_variable_one:St,statistic_variable_two:St}),St.define({}),wt.define({statistic:Ot});var Nt=new bt.b.Array(vt),Ct=new bt.b.Array(Et),Pt=new bt.b.Array(Ot),xt=new bt.b.Array(St),Lt=new bt.b.Array(jt),Tt={tip:vt,cohort:Et,coupledStatistic:wt,statisticVariable:St,educationProgramType:jt,tips:Nt,cohorts:Ct,statistics:Pt,educationProgramTypes:Lt,statistic:Ot,moment:_t,loadSchema:{tips:Nt,cohorts:Ct,statistics:Pt,statisticVariables:xt,educationProgramTypes:Lt,educationPrograms:new bt.b.Array(kt)}};function Dt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(n,!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rt="ADD_ENTITIES",At="UPDATE_ENTITY",Vt="REMOVE_ENTITY",Yt="ADD_COUPLED_STATISTIC_TO_TIP",Bt="DECOUPLE_STATISTIC_FROM_TIP",Ut="REMOVE_TIP",zt="STATISTIC_DELETED",$t="ADD_MOMENT_TO_TIP",qt="DECOUPLE_MOMENT_FROM_TIP",Jt=function(e){return{type:Rt,entities:e}},Ht=function(e,t,n){return{type:At,name:e,key:t,entity:n}},Wt=function(e,t){return{type:Vt,name:e,key:t}},Kt=function(e,t){return{type:Yt,coupledStatisticId:e,tipId:t}},Qt=function(e,t){return{type:$t,momentId:e,tipId:t}},Gt=function(e){return{type:Bt,coupledStatistic:e}},Xt=function(e,t){return{type:qt,id:e,tipId:t}},Zt=function(e){return{type:Ut,id:e}},en=function(e){return{type:zt,id:e}},tn={tips:{},coupledStatistics:{},cohorts:{},statistics:{},statisticVariables:{},educationProgramTypes:{}};function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(n,!0).forEach((function(t){rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ln="TOGGLE_EDIT_MODE_COUPLED_STATISTIC",sn="ADD_SELECTABLE_STATISTICVARIABLES",cn="ERROR_ADD",un="ERROR_REMOVE",pn=function(e){return{type:ln,id:e}},dn=function(e){return{type:sn,variables:e}},mn=function(e,t){return{type:cn,id:e,error:t}},fn=function(e){return{type:un,id:e}},gn={inEditMode:[],variableFilters:{acting:[],producing:[]},errors:{}},hn=n("PtYm");function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(n,!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Sn(e,t){return!t||"object"!==yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _n=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Sn(this,jn(t).call(this,e))).selectEducationProgramType=function(e){n.setState({education_program_type:e,statisticVariableOneFilters:JSON.parse(JSON.stringify(n.props.variableFilters[e])),statisticVariableTwoFilters:JSON.parse(JSON.stringify(n.props.variableFilters[e]))}),"acting"===e&&"hours"===n.state.select_type&&n.setState({select_type:"count"})},n.selectSelectType=function(e){n.setState({select_type:e})},n.updateFilter=function(e,t,a,r){var o=En({},"one"===e?n.state.statisticVariableOneFilters[t]:n.state.statisticVariableTwoFilters[t]),i=bn(o.parameters),l=i[a];l.value=r,i[a]=l,o.parameters=i;var s=bn("one"===e?n.state.statisticVariableOneFilters:n.state.statisticVariableTwoFilters);s[t]=o,"one"===e?n.setState({statisticVariableOneFilters:s}):n.setState({statisticVariableTwoFilters:s})},n.state={name:"",education_program_type:"acting",select_type:"count",statisticVariableOneFilters:JSON.parse(JSON.stringify(n.props.variableFilters.acting)),statisticVariableTwoFilters:JSON.parse(JSON.stringify(n.props.variableFilters.acting)),operatorIndex:3,submitting:!1},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(t,e),n=t,(r=[{key:"operatorIndex",value:function(e){return this.props.operators.findIndex((function(t){return t.type===e.type}))}},{key:"submit",value:function(){var e=this;if(!this.validate())return!1;this.setState({submitting:!0}),Ze.a.post("/api/statistics",{name:this.state.name,operator:this.props.operators[this.state.operatorIndex].type,education_program_type:this.state.education_program_type,select_type:this.state.select_type,statisticVariableOne:{filters:this.state.statisticVariableOneFilters},statisticVariableTwo:{filters:this.state.statisticVariableTwoFilters}}).then((function(t){e.setState({submitting:!1}),e.props.onCreated(t.data)})).catch((function(t){console.log(t),e.setState({submitting:!1})}))}},{key:"validate",value:function(){if(""===this.state.name)return alert(Lang.get("react.statistic.errors.name")),!1;var e=this.props.operators[this.state.operatorIndex];return!(e.type<0||e.type>3||""===this.state.education_program_type&&(alert(Lang.get("react.statistic.errors.select-two-variables")),1))}},{key:"render",value:function(){var e=this;return a.createElement("div",null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-lg-12",id:"step-4"},a.createElement("strong",null,Lang.get("react.statistic.statistic-name")),a.createElement("br",null),a.createElement("input",{onChange:function(t){return e.setState({name:t.target.value})},value:this.state.name,className:"form-control",type:"text",maxLength:255}))),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-lg-6",id:"step-5"},a.createElement("strong",null,Lang.get("statistics.activity-type")),a.createElement("select",{className:"form-control",onChange:function(t){return e.selectEducationProgramType(t.target.value)},value:this.state.education_program_type},a.createElement("option",{value:"acting"},"Acting"),a.createElement("option",{value:"producing"},"Producing"))),a.createElement("div",{className:"col-lg-6",id:"step-6"},a.createElement("strong",null,Lang.get("statistics.select")),a.createElement("select",{className:"form-control",onChange:function(t){return e.selectSelectType(t.target.value)},value:this.state.select_type},a.createElement("option",{value:"count"},Lang.get("statistics.variable-select-count")),a.createElement("option",{value:"hours",disabled:"acting"===this.state.education_program_type},Lang.get("statistics.variable-select-hours"))))),a.createElement("hr",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-4",id:"step-7-and-8"},a.createElement("h4",null,Lang.get("react.statistic.select-variable-one")," filters"),this.state.statisticVariableOneFilters.map((function(t,n){return a.createElement("div",{key:t.name},a.createElement("strong",null,Lang.get("statistics.filters."+t.name)),t.parameters.map((function(t,r){return a.createElement("div",{key:t.name},a.createElement("input",{value:t.value||"",placeholder:t.name,onChange:function(t){return e.updateFilter("one",n,r,t.target.value)},type:"text",className:"form-control",maxLength:255}))})))}))),a.createElement("div",{className:"col-md-4",id:"step-9"},a.createElement("h4",null,Lang.get("react.statistic.select-operator")),a.createElement("select",{className:"form-control",onChange:function(t){return e.setState({operatorIndex:parseInt(t.target.value)})},value:this.state.operatorIndex},this.props.operators.map((function(t){return a.createElement("option",{key:t.label,value:e.operatorIndex(t)},t.label)})))),a.createElement("div",{className:"col-md-4",id:"step-10"},a.createElement("h4",null,Lang.get("react.statistic.select-variable-two")," filters"),this.state.statisticVariableTwoFilters.map((function(t,n){return a.createElement("div",{key:t.name},a.createElement("strong",null,Lang.get("statistics.filters."+t.name)),t.parameters.map((function(t,r){return a.createElement("div",{key:t.name},a.createElement("input",{value:t.value||"",placeholder:t.name,onChange:function(t){return e.updateFilter("two",n,r,t.target.value)},type:"text",className:"form-control",maxLength:255}))})))})))),a.createElement("br",null),a.createElement("p",{style:{whiteSpace:"pre-line"}},Lang.get("statistics.variable-help")),a.createElement("button",{id:"step-11",type:"button",className:"btn btn-primary",disabled:this.state.submitting,onClick:function(){return e.submit()}},this.state.submitting&&a.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}),!this.state.submitting&&a.createElement("span",null,Lang.get("react.statistic.create"))))}}])&&On(n.prototype,r),o&&On(n,o),t}(a.Component),Nn={state:function(e){return{variableFilters:e.tipEditPageUi.variableFilters,operators:[{type:0,label:"+"},{type:1,label:"-"},{type:2,label:"*"},{type:3,label:"/"}]}}},Cn=Object(gt.b)(Nn.state,Nn.dispatch)(_n);function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(n,!0).forEach((function(t){Dn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function In(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Mn(e,t){return!t||"object"!==Pn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fn(e){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e,t){return(Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var An=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Mn(this,Fn(t).call(this,e))).selectEducationProgramType=function(e){n.setState({education_program_type:e,statisticVariableOneFilters:JSON.parse(JSON.stringify(n.props.variableFilters[e])),statisticVariableTwoFilters:JSON.parse(JSON.stringify(n.props.variableFilters[e]))}),"acting"===e&&"hours"===n.state.select_type&&n.setState({select_type:"count"})},n.selectSelectType=function(e){n.setState({select_type:e})},n.updateFilter=function(e,t,a,r){var o=Tn({},"one"===e?n.state.statisticVariableOneFilters[t]:n.state.statisticVariableTwoFilters[t]),i=xn(o.parameters),l=i[a];l.value=r,i[a]=l,o.parameters=i;var s=xn("one"===e?n.state.statisticVariableOneFilters:n.state.statisticVariableTwoFilters);s[t]=o,"one"===e?n.setState({statisticVariableOneFilters:s}):n.setState({statisticVariableTwoFilters:s})},e.loading?(n.state={},Mn(n)):(n.state={name:e.source.name,education_program_type:e.source.education_program_type,select_type:e.source.select_type,statisticVariableOneFilters:e.source.statisticVariableOneFilters,statisticVariableTwoFilters:e.source.statisticVariableTwoFilters,operatorIndex:e.source.operator,submitting:!1},n)}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e,t){e.id!==this.props.id&&this.setState({name:e.source.name,education_program_type:e.source.education_program_type,select_type:e.source.select_type,statisticVariableOneFilters:e.source.statisticVariableOneFilters,statisticVariableTwoFilters:e.source.statisticVariableTwoFilters,operatorIndex:e.source.operator})}},{key:"operatorIndex",value:function(e){return this.props.operators.findIndex((function(t){return t.type===e.type}))}},{key:"submit",value:function(){var e=this;if(!this.validate())return!1;this.setState({submitting:!0}),Ze.a.put("/api/statistics/".concat(this.props.id),{name:this.state.name,operator:this.props.operators[this.state.operatorIndex].type,education_program_type:this.state.education_program_type,select_type:this.state.select_type,statisticVariableOne:{filters:this.state.statisticVariableOneFilters},statisticVariableTwo:{filters:this.state.statisticVariableTwoFilters}}).then((function(t){e.setState({submitting:!1}),e.props.onUpdated(t.data)})).catch((function(t){console.log(t),e.setState({submitting:!1})}))}},{key:"validate",value:function(){if(""===this.state.name)return alert(Lang.get("react.statistic.errors.name")),!1;var e=this.props.operators[this.state.operatorIndex];return!(e.type<0||e.type>3||""===this.state.education_program_type&&(alert(Lang.get("react.statistic.errors.select-two-variables")),1))}},{key:"render",value:function(){var e=this;return this.props.loading?null:a.createElement("div",null,a.createElement("div",{className:"row"},a.createElement("div",{className:"col-lg-12"},a.createElement("strong",null,Lang.get("react.statistic.statistic-name")),a.createElement("br",null),a.createElement("input",{onChange:function(t){return e.setState({name:t.target.value})},value:this.state.name,className:"form-control",type:"text",maxLength:255}))),a.createElement("br",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-lg-6"},a.createElement("strong",null,Lang.get("statistics.activity-type")),a.createElement("select",{className:"form-control",onChange:function(t){return e.selectEducationProgramType(t.target.value)},value:this.state.education_program_type},a.createElement("option",{value:"acting"},"Acting"),a.createElement("option",{value:"producing"},"Producing"))),a.createElement("div",{className:"col-lg-6"},a.createElement("strong",null,Lang.get("statistics.select")),a.createElement("select",{className:"form-control",onChange:function(t){return e.selectSelectType(t.target.value)},value:this.state.select_type},a.createElement("option",{value:"count"},Lang.get("statistics.variable-select-count")),a.createElement("option",{value:"hours",disabled:"acting"===this.state.education_program_type},Lang.get("statistics.variable-select-hours"))))),a.createElement("hr",null),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-4"},a.createElement("h4",null,Lang.get("react.statistic.select-variable-one")," filters"),this.state.statisticVariableOneFilters.map((function(t,n){return a.createElement("div",{key:t.name},a.createElement("strong",null,Lang.get("statistics.filters."+t.name)),t.parameters.map((function(t,r){return a.createElement("div",{key:t.name},a.createElement("input",{value:t.value||"",placeholder:t.name,onChange:function(t){return e.updateFilter("one",n,r,t.target.value)},type:"text",className:"form-control",maxLength:255}))})))}))),a.createElement("div",{className:"col-md-4"},a.createElement("h4",null,Lang.get("react.statistic.select-operator")),a.createElement("select",{className:"form-control",onChange:function(t){return e.setState({operatorIndex:parseInt(t.target.value)})},value:this.state.operatorIndex},this.props.operators.map((function(t){return a.createElement("option",{key:t.label,value:e.operatorIndex(t)},t.label)})))),a.createElement("div",{className:"col-md-4"},a.createElement("h4",null,Lang.get("react.statistic.select-variable-two")," filters"),this.state.statisticVariableTwoFilters.map((function(t,n){return a.createElement("div",{key:t.name},a.createElement("strong",null,Lang.get("statistics.filters."+t.name)),t.parameters.map((function(t,r){return a.createElement("div",{key:t.name},a.createElement("input",{value:t.value||"",placeholder:t.name,onChange:function(t){return e.updateFilter("two",n,r,t.target.value)},type:"text",className:"form-control",maxLength:255}))})))})))),a.createElement("br",null),a.createElement("p",{style:{whiteSpace:"pre-line"}},Lang.get("statistics.variable-help")),a.createElement("button",{type:"button",className:"btn btn-primary",disabled:this.state.submitting,onClick:function(){return e.submit()}},this.state.submitting&&a.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}),!this.state.submitting&&a.createElement("span",null,Lang.get("react.statistic.save"))))}}])&&In(n.prototype,r),o&&In(n,o),t}(a.Component),Vn=Object(ht.f)(Object(gt.b)((function(e,t){var n=t.id,a=t.history,r=e.entities.statistics[n];if(void 0===r)return a.push("/"),{loading:!0};var o=e.entities.statisticVariables[r.statistic_variable_one],i=e.entities.statisticVariables[r.statistic_variable_two];return{history:a,id:r.id,operators:[{type:0,label:"+"},{type:1,label:"-"},{type:2,label:"*"},{type:3,label:"/"}],variableFilters:e.tipEditPageUi.variableFilters,source:{education_program_type:r.education_program_type,select_type:r.select_type,name:r.name||"",statisticVariableOneType:o.type,statisticVariableOneFilters:o.filters,statisticVariableTwoType:i.type,statisticVariableTwoFilters:i.filters,operator:r.operator}}}),(function(e){return{onUpdated:function(t){e(Jt(Object(bt.a)(t,Tt.statistic).entities))}}}))(An));function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(n,!0).forEach((function(t){Un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function qn(e,t){return!t||"object"!==zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jn(e){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=qn(this,Jn(t).call(this,e))).deleteTip=function(){Ze.a.delete("/api/tips/".concat(n.state.deleteTipId)).then((function(e){n.props.removeTip(n.state.deleteTipId),n.setState({showTipDeleteModal:!1,deleteTipId:null})}))},n.deleteStatistic=function(){Ze.a.delete("/api/statistics/".concat(n.state.deleteStatisticId)).then((function(e){n.props.removeStatistic(n.state.deleteStatisticId),n.setState({showStatisticDeleteModal:!1,deleteStatisticId:null})}))},n.createTip=function(){Ze.a.post("/api/tips").then((function(e){var t=Object(bt.a)(e.data,Tt.tip);n.props.newTip(t.entities),n.props.history.push("/tip/".concat(t.result))}))},n.state={filterTips:"",filterStatistics:"",showTipDeleteModal:!1,deleteTipId:null,deleteStatisticId:null,showStatisticDeleteModal:!1,showNewStatisticModal:!1,showUpdateStatisticModal:!1,updateStatisticId:null},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.tips,a=t.statistics;return r.a.createElement("div",null,r.a.createElement(hn.a,{open:this.state.showTipDeleteModal,center:!0,onClose:function(){return e.setState({showTipDeleteModal:!1,deleteTipId:null})},classNames:{modal:"panel panel-default"}},r.a.createElement("div",{className:"panel-body"},r.a.createElement("p",{style:{padding:"20px"}},Lang.get("tips.delete-confirm")),r.a.createElement("button",{onClick:this.deleteTip,className:"btn btn-danger"},Lang.get("react.delete"))," ",r.a.createElement("button",{onClick:function(){return e.setState({showTipDeleteModal:!1,deleteTipId:null})},className:"btn btn-default"},Lang.get("react.cancel")))),r.a.createElement(hn.a,{open:this.state.showStatisticDeleteModal,center:!0,onClose:function(){return e.setState({showStatisticDeleteModal:!1,deleteStatisticId:null})},classNames:{modal:"panel panel-default"}},r.a.createElement("div",{className:"panel-body"},r.a.createElement("p",{style:{padding:"20px"}},Lang.get("statistics.delete-confirm")),r.a.createElement("button",{onClick:this.deleteStatistic,className:"btn btn-danger"},Lang.get("react.delete"))," ",r.a.createElement("button",{onClick:function(){return e.setState({showStatisticDeleteModal:!1,deleteStatisticId:null})},className:"btn btn-default"},Lang.get("react.cancel")))),r.a.createElement("h1",null,"Tips & statistieken"),r.a.createElement("ul",{className:"nav nav-tabs",role:"tablist"},r.a.createElement("li",{className:"tips"===this.props.currentPage?"active":""},r.a.createElement("a",{onClick:function(t){return e.props.setCurrentPage("tips")},style:{textTransform:"capitalize"}},Lang.get("tips.tips"))),r.a.createElement("li",{className:"statistics"===this.props.currentPage?"active":""},r.a.createElement("a",{onClick:function(t){return e.props.setCurrentPage("statistics")},style:{textTransform:"capitalize"}},Lang.get("statistics.statistics"))),r.a.createElement("li",{className:"help"===this.props.currentPage?"active":""},r.a.createElement("a",{onClick:function(t){return e.props.setCurrentPage("help")},style:{textTransform:"capitalize"}},Lang.get("tips.help.help")))),"tips"===this.props.currentPage&&r.a.createElement("div",null,r.a.createElement("h3",null,Lang.get("tips.tips")),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.createTip},Lang.get("tips.new")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("label",{htmlFor:"tipsFilter"},"Filter"),r.a.createElement("input",{type:"text",id:"tipsFilter",value:this.state.filterTips,onChange:function(t){return e.setState({filterTips:t.target.value})},className:"form-control "}))),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,Lang.get("react.tips.name")),r.a.createElement("th",null,"Trigger"),r.a.createElement("th",null,"Likes"),r.a.createElement("th",null,Lang.get("tips.views")),r.a.createElement("th",null,Lang.get("tips.active")),r.a.createElement("th",null))),r.a.createElement("tbody",null,Object.values(n).filter((function(t){return t.name.toLowerCase().includes(e.state.filterTips.toLowerCase())})).map((function(t){return r.a.createElement(aa,{onClickDelete:function(){return e.setState({showTipDeleteModal:!0,deleteTipId:t.id})},key:t.id,tip:t})}))))),"statistics"===this.props.currentPage&&r.a.createElement("div",null,r.a.createElement("h3",null,Lang.get("tips.statistics")),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.setState({showNewStatisticModal:!0})}},Lang.get("statistics.create-new"))," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("label",{htmlFor:"statisticsFilter"},"Filter"),r.a.createElement("input",{type:"text",id:"statisticsFilter",value:this.state.filterStatistics,onChange:function(t){return e.setState({filterStatistics:t.target.value})},className:"form-control "}))),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,Lang.get("react.tips.name")),r.a.createElement("th",null,Lang.get("react.tips.program")),r.a.createElement("th",null))),r.a.createElement("tbody",null,Object.values(a).filter((function(t){return t.name.toLowerCase().includes(e.state.filterStatistics.toLowerCase())})).map((function(t){return String(t.id).includes(["p-p-","p-a-"])||"predefinedstatistic"===t.type?null:r.a.createElement(ea,{key:t.id,statistic:t,onClickDelete:function(){return e.setState({showStatisticDeleteModal:!0,deleteStatisticId:t.id})},onClickUpdate:function(){return e.setState({showUpdateStatisticModal:!0,updateStatisticId:t.id})}})})))),r.a.createElement(hn.a,{open:this.state.showNewStatisticModal,center:!0,onClose:function(){return e.setState({showNewStatisticModal:!1})},classNames:{modal:"panel panel-default"}},r.a.createElement("div",{className:"panel-body",id:"step-8"},r.a.createElement("h3",null,Lang.get("react.statistic.create-statistic")),r.a.createElement(Cn,{onCreated:function(t){e.props.storeNewStatisticVariable(Object(bt.a)(t,Tt.statistic)),e.setState({showNewStatisticModal:!1})}}))),r.a.createElement(hn.a,{open:this.state.showUpdateStatisticModal,center:!0,onClose:function(){return e.setState({showUpdateStatisticModal:!1})},classNames:{modal:"panel panel-default"}},r.a.createElement("div",{className:"panel-body",id:"step-8"},r.a.createElement("h3",null,Lang.get("statistics.edit")),r.a.createElement(Vn,{id:this.state.updateStatisticId})))),"help"===this.props.currentPage&&r.a.createElement("div",null,r.a.createElement("h3",null,Lang.get("tips.help.how-does-it-work")),r.a.createElement("strong",null,Lang.get("tips.tips")),r.a.createElement("p",null,Lang.get("tips.help.explain-tips")),r.a.createElement("strong",null,Lang.get("statistics.statistics")),r.a.createElement("p",null,Lang.get("tips.help.explain-statistics")),r.a.createElement("p",null,Lang.get("tips.help.explain-couple")),r.a.createElement("strong",null,Lang.get("tips.moments")),r.a.createElement("p",null,Lang.get("tips.help.explain-moment")),r.a.createElement("strong",null,Lang.get("tips.tiptext")),r.a.createElement("p",null,Lang.get("tips.help.explain-tiptext")),r.a.createElement("p",null,Lang.get("tips.help.explain-footer"))),Object.keys(this.props.errors).length>0&&r.a.createElement("div",{style:{position:"fixed",right:10,bottom:40}},Object.keys(this.props.errors).map((function(t){return r.a.createElement("div",{className:"alert alert-error",key:t},e.props.errors[t])}))))}}])&&$n(n.prototype,a),o&&$n(n,o),t}(r.a.Component),Kn=function(e){return{entities:e.entities,tips:e.entities.tips,statistics:e.entities.statistics,errors:e.tipEditPageUi.errors}},Qn=function(e){return{newTip:function(t){return e(Jt(t))},removeTip:function(t){return e(Zt(t))},removeStatistic:function(t){return e(en(t))},storeNewStatisticVariable:function(t){e(Jt(t.entities))}}},Gn=Object(gt.b)(Kn,Qn)(Wn),Xn=function(e,t){return Bn({},t)},Zn=function(e){return{}},ea=Object(gt.b)(Xn,Zn)((function(e){var t=e.statistic,n=e.onClickDelete,a=e.onClickUpdate;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.education_program_type||"-"),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-primary",onClick:a},Lang.get("react.edit")),"   ",r.a.createElement("button",{className:"btn btn-default",onClick:n},Lang.get("react.delete"))))})),ta=function(e,t){return Bn({},t,{coupledStatistics:t.tip.coupled_statistics.sort().map((function(t){return e.entities.coupledStatistics[t]})),statistics:e.entities.statistics})},na=function(e,t){return{toggleAvailability:function(){var n=t.tip,a=Bn({},n,{showInAnalysis:0===n.showInAnalysis?1:0});Ze.a.put("/api/tips/".concat(n.id),{tip:a}).then((function(){e(Ht("tips",a.id,a))})).catch((function(t){Object.values(t.response.data).forEach((function(t){var n=Math.floor(1e4*Math.random());e(mn(n,t)),setTimeout((function(){return e(fn(n))}),2500)}))}))}}},aa=Object(gt.b)(ta,na)((function(e){var t,n=e.tip,a=e.onClickDelete,o=e.coupledStatistics,i=e.statistics,l=e.toggleAvailability,s=!1;return o.forEach((function(e){var n=i[e.statistic];"acting"===n.education_program_type&&(t=!0),"producing"===n.education_program_type&&(s=!0)})),r.a.createElement("tr",null,r.a.createElement("td",null,n.name),r.a.createElement("td",null,n.moments.length>0&&Lang.get("tips.type-moment"),n.moments.length>0&&n.coupled_statistics.length>0&&", ",n.coupled_statistics.length>0&&r.a.createElement("span",null,Lang.get("tips.type-statistic")," (",t&&"acting",t&&s&&", ",s&&"producing",")")),r.a.createElement("td",null,r.a.createElement("span",{className:"glyphicon glyphicon-thumbs-up"})," ",n.likes.filter((function(e){return 1===e.type})).length," / ",r.a.createElement("span",{className:"glyphicon glyphicon-thumbs-down"})," ",n.likes.filter((function(e){return-1===e.type})).length),r.a.createElement("td",null,n.student_tip_views.length),r.a.createElement("td",{style:{cursor:"pointer"},onClick:l},1===n.showInAnalysis&&r.a.createElement("span",{className:"glyphicon glyphicon-ok",style:{color:"green"}}),0===n.showInAnalysis&&r.a.createElement("span",{className:"glyphicon glyphicon-remove",style:{color:"red"}})),r.a.createElement("td",null,r.a.createElement(yt.b,{to:"/tip/".concat(n.id)},r.a.createElement("span",{className:"btn btn-primary"},Lang.get("react.edit"))),"   ",r.a.createElement("button",{className:"btn btn-default",onClick:a},Lang.get("react.delete"))))}));function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ra(n,!0).forEach((function(t){ia(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ra(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ia(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var la="UPDATE_COUPLE_PROPERTY",sa=function(e,t){return{type:la,property:e,value:t}},ca={statistic:"",comparisonOperator:0,threshold:.5},ua=n("bU1z");function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(n,!0).forEach((function(t){ma(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fa=function(e){e.tip;var t=e.coupledStatistic,n=e.statistic,a=(e.educationProgramType,e.editMode),o=e.updateEntity,i=e.toggleEditModeForCoupledStatistic,l=e.decoupleStatistic;return a?r.a.createElement("div",{className:"panel panel-default",style:{flex:"1"}},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",null,r.a.createElement("h5",null,"predefinedstatistic"===n.type&&Lang.get("statistics.predefined-stats."+n.name),"predefinedstatistic"!==n.type&&n.name),r.a.createElement("strong",null,Lang.get("statistics.when-active")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6",id:"step-13"},r.a.createElement("select",{value:t.comparison_operator,className:"form-control",onChange:function(e){return o("coupledStatistics",parseInt(t.id),da({},t,{comparison_operator:e.target.value}))}},r.a.createElement("option",{value:"1"},Lang.get("statistics.greater-than")),r.a.createElement("option",{value:"0"},Lang.get("statistics.less-than")))),r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("input",{type:"number",className:"form-control",step:"any",value:t.threshold,onChange:function(e){return o("coupledStatistics",parseInt(t.id),da({},t,{threshold:e.target.value}))}})))),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){Ze.a.put("/api/tip-coupled-statistics/".concat(t.id),{threshold:t.threshold,comparison_operator:t.comparison_operator}).then((function(e){var n=Object(bt.a)(e.data,Tt.coupledStatistic).entities.coupledStatistics[t.id];o("coupledStatistics",t.id,n),i(t.id)}))}},Lang.get("tips.save"))," ",r.a.createElement("button",{className:"btn btn-danger",onClick:function(){Ze.a.delete("/api/tip-coupled-statistics/".concat(t.id)).then((function(e){l(t)}))}},Lang.get("tips.decouple"))," ",r.a.createElement("button",{className:"btn",onClick:function(){return i(t.id)}},Lang.get("tips.cancel"))))):r.a.createElement("div",{className:"panel panel-default",style:{flex:"1"}},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",null,r.a.createElement("h5",null,"predefinedstatistic"===n.type&&Lang.get("statistics.predefined-stats."+n.name),"predefinedstatistic"!==n.type&&n.name),r.a.createElement("strong",null,Lang.get("tips.ep-type"),":")," ",n.education_program_type,r.a.createElement("br",null),r.a.createElement("strong",null,Lang.get("tips.condition"),": "),t.condition,r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return i(t.id)}},Lang.get("general.edit"))))};function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ya(e,t){return!t||"object"!==ga(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ba(e){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ea=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ya(this,ba(t).call(this,e))).toggleCoupleModal=function(){n.setState({showCoupleStatisticModal:!n.state.showCoupleStatisticModal}),n.props.runJoyride&&1===n.props.stepIndex&&n.props.setStepIndex({stepIndex:2})},n.toggleNewStatisticModal=function(){n.setState({showNewStatisticModal:!n.state.showNewStatisticModal}),n.props.runJoyride&&2===n.props.stepIndex&&n.props.setStepIndex({stepIndex:3})},n.coupleStatistic=function(){var e=n.props,t=e.tip,a=e.coupleStatisticForm,r=e.statistics,o=e.storeNewCoupledStatistic;n.setState({coupleRequestBusy:!0}),Ze.a.post("/api/tip-coupled-statistics",{tip_id:t.id,statistic_id:a.statistic,threshold:a.threshold,className:r[a.statistic].className,comparisonOperator:a.comparisonOperator}).then((function(e){o(Object(bt.a)(e.data,Tt.coupledStatistic)),n.props.joyRide&&n.props.joyRideRef.helpers.next(),n.setState({showCoupleStatisticModal:!1,coupleRequestBusy:!1})}))},n.state={showCoupleStatisticModal:!1,coupleRequestBusy:!1,showNewStatisticModal:!1},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(t,e),n=t,o=[{key:"getDerivedStateFromProps",value:function(e,t){return 2===e.stepIndex&&(t.showCoupleStatisticModal=!0),3===e.stepIndex&&(t.showNewStatisticModal=!0),11===e.stepIndex&&(t.showNewStatisticModal=!1),15===e.stepIndex&&(t.showCoupleStatisticModal=!1),t}}],(a=[{key:"render",value:function(){var e,t=this,n=!1;return this.props.coupledStatistics.forEach((function(a){var r=t.props.statistics[a.statistic];"acting"===r.education_program_type&&(e=!0),"producing"===r.education_program_type&&(n=!0)})),r.a.createElement("div",null,r.a.createElement("h3",null,Lang.get("tips.coupled-statistics")),r.a.createElement("button",{id:"step-2",className:"btn btn-primary",onClick:this.toggleCoupleModal},Lang.get("statistics.couple")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row",style:{background:"white",marginBottom:"10px",marginTop:"10px"},id:"step-16"},n&&e&&r.a.createElement("div",{className:"alert alert-danger text-danger",role:"alert"},Lang.get("statistics.acting-producing-coupled")),r.a.createElement("div",null,this.props.coupledStatistics.map((function(e){var n=t.props.statistics[e.statistic];return r.a.createElement("div",{className:"col-md-4",key:e.id},r.a.createElement(fa,{coupledStatistic:e,tip:t.props.tip,statistic:n,educationProgramType:t.props.educationProgramTypes[n.education_program_type],editMode:t.props.coupledStatisticsInEditMode.includes(e.id),updateEntity:t.props.updateEntity,toggleEditModeForCoupledStatistic:t.props.toggleEditModeForCoupledStatistic,decoupleStatistic:t.props.decoupleStatistic}))})))),r.a.createElement(hn.a,{open:this.state.showCoupleStatisticModal,center:!0,onClose:function(){return t.setState({showCoupleStatisticModal:!1})},classNames:{modal:"panel panel-default"}},r.a.createElement("div",{className:"panel-body"},r.a.createElement("h3",{style:{display:"inline-block"}},Lang.get("tips.couple-statistic")),r.a.createElement("br",null),r.a.createElement("strong",null,Lang.get("statistics.select-statistic")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6",id:"step-12"},r.a.createElement("select",{value:this.props.coupleStatisticForm.statistic,className:"form-control",onChange:function(e){return t.props.updateCoupleStatisticFormProperty("statistic",e.target.value)}},r.a.createElement("option",{disabled:!0}),Sa(this.props.tip,this.props.statistics,this.props.coupledStatistics).map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},"predefinedstatistic"===e.type&&Lang.get("statistics.predefined-stats."+e.name),"predefinedstatistic"!==e.type&&e.name," -  (",e.education_program_type,")","predefinedstatistic"===e.type&&" - ("+Lang.get("statistics.predefined")+")")}))))),r.a.createElement("br",null),r.a.createElement("strong",null,Lang.get("statistics.when-active")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3",id:"step-13"},r.a.createElement("select",{value:this.props.coupleStatisticForm.comparisonOperator,className:"form-control",onChange:function(e){return t.props.updateCoupleStatisticFormProperty("comparisonOperator",e.target.value)}},r.a.createElement("option",{value:"1"},Lang.get("statistics.greater-than")),r.a.createElement("option",{value:"0"},Lang.get("statistics.less-than")))),r.a.createElement("div",{className:"col-lg-3",id:"step-14"},r.a.createElement("input",{type:"number",className:"form-control",step:"any",value:this.props.coupleStatisticForm.threshold,onChange:function(e){return t.props.updateCoupleStatisticFormProperty("threshold",e.target.value)}}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",id:"step-15",disabled:""===this.props.coupleStatisticForm.statistic||""===this.props.coupleStatisticForm.threshold||this.props.coupleStatisticForm.comparisonOperator>"2"||this.state.coupleRequestBusy,onClick:this.coupleStatistic},this.state.coupleRequestBusy&&r.a.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}),!this.state.coupleRequestBusy&&r.a.createElement("span",null,Lang.get("statistics.couple")))," ",r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t.setState({showCoupleStatisticModal:!1})}},Lang.get("statistics.cancel")),r.a.createElement("button",{className:"pull-right btn btn-default",id:"step-3",onClick:this.toggleNewStatisticModal},Lang.get("react.statistic.create-statistic"))))),r.a.createElement(hn.a,{open:this.state.showNewStatisticModal,center:!0,onClose:function(){return t.setState({showNewStatisticModal:!1})},classNames:{modal:"panel panel-default"}},r.a.createElement("div",{className:"panel-body",id:"step-8"},r.a.createElement("h3",null,Lang.get("react.statistic.create-statistic")),r.a.createElement(Cn,{joyrideStepIndex:this.props.stepIndex,onCreated:function(e){t.props.storeNewStatisticVariable(Object(bt.a)(e,Tt.statistic)),t.props.joyRide&&t.props.joyRideRef.helpers.next(),t.setState({showNewStatisticModal:!1})}}))))}}])&&ha(n.prototype,a),o&&ha(n,o),t}(r.a.Component),wa=function(e){return{educationProgramTypes:e.entities.educationProgramTypes,coupledStatisticsInEditMode:e.tipEditPageUi.inEditMode,coupleStatisticForm:e.coupleStatistic}},Oa=function(e){return{updateEntity:function(t,n,a){return e(Ht(t,n,a))},toggleEditModeForCoupledStatistic:function(t){return e(pn(t))},decoupleStatistic:function(t){return e(Gt(t))},updateCoupleStatisticFormProperty:function(t,n){return e(sa(t,n))},storeNewCoupledStatistic:function(t){e(Jt(t.entities)),e(Kt(t.result,t.entities.coupledStatistics[t.result].tip_id))},storeNewStatisticVariable:function(t){e(Jt(t.entities))}}},Sa=function(e,t){return Object.values(t).filter((function(e){return String(e.id).startsWith("p-p-")||String(e.id).startsWith("p-a-")||"customstatistic"===e.type}))},ja=Object(gt.b)(wa,Oa)(Ea);function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ca(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Pa(e,t){return!t||"object"!==ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xa(e){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function La(e,t){return(La=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ta=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Pa(this,xa(t).call(this,e))).decoupleMoment=function(){Ze.a.delete("/api/moments/".concat(n.props.moment.id)).then((function(e){var t=n.props.moment.id,a=n.props.moment.tip_id;n.props.decoupleMomentFromTip(t,a),n.props.removeEntity("moments",t)}))},n.saveMoment=function(){var e={rangeStart:n.state.newRangeStart,rangeEnd:n.state.newRangeEnd};Ze.a.put("/api/moments/".concat(n.props.moment.id),e).then((function(t){n.props.updateEntity("moments",n.props.moment.id,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_a(n,!0).forEach((function(t){Na(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.props.moment,{},e)),n.setState({editMode:!1})}))},n.state={editMode:!1,newRangeStart:e.moment.rangeStart,newRangeEnd:e.moment.rangeEnd},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&La(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props.moment;return r.a.createElement("div",{className:"panel panel-default",style:{flex:"1"}},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",null,!this.state.editMode&&r.a.createElement("h4",null,Lang.get("tips.percentage-period",{percentage:"".concat(t.rangeStart,"% - ").concat(t.rangeEnd,"%")})),this.state.editMode&&r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,Lang.get("tips.rangeStart")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{min:"0",max:"100",value:this.state.newRangeStart,type:"number",step:1,className:"form-control",onChange:function(t){return e.setState({newRangeStart:t.target.value})}}),r.a.createElement("span",{className:"input-group-addon"},"%"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,Lang.get("tips.rangeEnd")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{min:"0",max:"100",value:this.state.newRangeEnd,type:"number",step:1,className:"form-control",onChange:function(t){return e.setState({newRangeEnd:t.target.value})}}),r.a.createElement("span",{className:"input-group-addon"},"%"))))),r.a.createElement("br",null),!this.state.editMode&&r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("button",{onClick:function(){return e.setState({editMode:!0})},className:"btn btn-primary"},Lang.get("general.edit"))),this.state.editMode&&r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("button",{onClick:this.saveMoment,className:"btn btn-primary"},Lang.get("tips.save"))," ",r.a.createElement("button",{onClick:this.decoupleMoment,className:"btn btn-danger"},Lang.get("tips.decouple"))," ",r.a.createElement("button",{onClick:function(){return e.setState({editMode:!1})},className:"btn"},Lang.get("tips.cancel")))))}}])&&Ca(n.prototype,a),o&&Ca(n,o),t}(r.a.Component),Da=function(e,t){return{moment:e.entities.moments[t.id]}},Ia=function(e){return{updateEntity:function(t,n,a){return e(Ht(t,n,a))},removeEntity:function(t,n){return e(Wt(t,n))},decoupleMomentFromTip:function(t,n){return e(Xt(t,n))}}},Ma=Object(gt.b)(Da,Ia)(Ta);function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ra(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Aa(e,t){return!t||"object"!==Fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Va(e){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ya(e,t){return(Ya=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ba=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Aa(this,Va(t).call(this,e))).createMoment=function(){var e={rangeStart:n.state.newRangeStart,rangeEnd:n.state.newRangeEnd};Ze.a.post("/api/moments/create/".concat(n.props.tip.id),e).then((function(e){n.props.storeNewMoment(Object(bt.a)(e.data,Tt.moment)),n.setState({showNewMomentModal:!1})}))},n.state={showNewMomentModal:!1,newRangeStart:0,newRangeEnd:20},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ya(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props.tip;return r.a.createElement("div",null,r.a.createElement("h3",null,Lang.get("tips.moment-trigger")),r.a.createElement("p",null,Lang.get("tips.moment-trigger-detail")),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.setState({showNewMomentModal:!0})}},Lang.get("tips.couple-moment")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},t.moments.map((function(e){return r.a.createElement("div",{className:"col-md-4",key:e},r.a.createElement(Ma,{id:e}))}))),r.a.createElement(hn.a,{open:this.state.showNewMomentModal,center:!0,onClose:function(){return e.setState({showNewMomentModal:!1})},classNames:{modal:"panel panel-default"}},r.a.createElement("div",{className:"panel-body",id:"step-8"},r.a.createElement("h3",null,Lang.get("tips.new-moment")),r.a.createElement("div",{className:"row",id:"step-moment-2"},r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,Lang.get("tips.rangeStart")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{min:"0",max:"100",value:this.state.newRangeStart,type:"number",step:1,className:"form-control",onChange:function(t){return e.setState({newRangeStart:t.target.value})}}),r.a.createElement("span",{className:"input-group-addon"},"%")))),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,Lang.get("tips.rangeEnd")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{min:"0",max:"100",value:this.state.newRangeEnd,type:"number",step:1,className:"form-control",onChange:function(t){return e.setState({newRangeEnd:t.target.value})}}),r.a.createElement("span",{className:"input-group-addon"},"%"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-3 pull-right"},r.a.createElement("button",{onClick:this.createMoment,className:"btn btn-primary"},Lang.get("tips.create")))))))}}])&&Ra(n.prototype,a),o&&Ra(n,o),t}(r.a.Component),Ua=function(e){return{}},za=function(e){return{storeNewMoment:function(t){e(Jt(t.entities)),e(Qt(t.result,t.entities.moments[t.result].tip_id))},updateEntity:function(t,n,a){return e(Ht(t,n,a))}}},$a=Object(gt.b)(Ua,za)(Ba);function qa(e){return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(n,!0).forEach((function(t){Wa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ka(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Qa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ga(e){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Za(e,t){return(Za=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var er=["en","nl"],tr=function(e){function t(e){var n,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=Ga(t).call(this,e),(n=!o||"object"!==qa(o)&&"function"!=typeof o?Xa(a):o).joyrideRef=null,n.toggleVisibleCohorts=function(e){var t=Object.values(n.props.cohorts).filter((function(e){return n.state.selectedEducationProgramId===e.ep_id||null===n.state.selectedEducationProgramId})),a=Ka(n.props.tip.enabled_cohorts);t.forEach((function(t){a.includes(t.id)?e||a.splice(a.indexOf(t.id),1):e&&a.push(t.id)})),n.props.updateEntity("tips",n.props.tip.id,Ha({},n.props.tip,{enabled_cohorts:a}))},n.joyrideCallback=function(e){var t=e.action,a=e.index,r=e.type;r===ua.b.STEP_AFTER&&n.setState({stepIndex:a+(t===ua.a.PREV?-1:1)}),r===ua.b.TOUR_END&&n.setState({runJoyride:!1,stepIndex:0}),n.forceUpdate()},n.joyrideStepsStatisticTip=[{content:Lang.get("tips.help-steps.1"),target:"#step-1",disableBeacon:!0},{content:Lang.get("tips.help-steps.2"),target:"#step-2",disableBeacon:!0},{content:Lang.get("tips.help-steps.3"),target:"#step-3",disableBeacon:!0},{content:Lang.get("tips.help-steps.4"),target:"#step-4",disableBeacon:!0},{content:Lang.get("tips.help-steps.5"),target:"#step-5",disableBeacon:!0},{content:Lang.get("tips.help-steps.6"),target:"#step-6",disableBeacon:!0},{content:Lang.get("tips.help-steps.7"),target:"#step-7-and-8",disableBeacon:!0},{content:Lang.get("tips.help-steps.8"),target:"#step-7-and-8",disableBeacon:!0},{content:Lang.get("tips.help-steps.9"),target:"#step-9",disableBeacon:!0},{content:Lang.get("tips.help-steps.10"),target:"#step-10",disableBeacon:!0},{content:Lang.get("tips.help-steps.11"),target:"#step-11",disableBeacon:!0},{content:Lang.get("tips.help-steps.12"),target:"#step-12",disableBeacon:!0},{content:Lang.get("tips.help-steps.13"),target:"#step-13",disableBeacon:!0},{content:Lang.get("tips.help-steps.14"),target:"#step-14",disableBeacon:!0},{content:Lang.get("tips.help-steps.15"),target:"#step-15",disableBeacon:!0},{content:Lang.get("tips.help-steps.16"),target:"#step-16",disableBeacon:!0},{content:Lang.get("tips.help-steps.17"),target:"#step-17",disableBeacon:!0},{content:Lang.get("tips.help-steps.18"),target:"#step-18",disableBeacon:!0},{content:Lang.get("tips.help-steps.19"),target:"#step-19",disableBeacon:!0},{content:Lang.get("tips.help-steps.20"),target:"#step-20",disableBeacon:!0}],n.setStepIndex=function(e){return n.setState({stepIndex:e})},n.render=function(){var e=n.props,t=(e.match,e.tip),a=e.coupledStatistics,o=e.statistics,i=e.educationPrograms,l=e.cohorts,s=e.updateEntity,c=e.moments,u=e.educationProgramTypes;if(void 0===t)return r.a.createElement("div",null,"Loading...");var p,d=!1;a.forEach((function(e){var t=o[e.statistic];"acting"===t.education_program_type&&(p=!0),"producing"===t.education_program_type&&(d=!0)}));var m=p&&d||!p&&!d?"both":p?"acting":d?"producing":void 0,f=function(e){var t=u[e.eptype_id].eptype_name.toLowerCase();return m===t||"both"===m},g=Object.values(l).filter((function(e){return n.state.selectedEducationProgramId===e.ep_id||null===n.state.selectedEducationProgramId})).filter((function(e){var t=i[e.ep_id];return f(t)}));return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement(yt.b,{to:"/"},r.a.createElement("button",{type:"button",className:"btn"},Lang.get("tips.back"))),r.a.createElement("button",{onClick:function(){return n.setState({runJoyride:!0,stepIndex:0})},className:"btn btn-danger pull-right"},Lang.get("tips.help-steps.guide")),r.a.createElement("br",null),r.a.createElement("h1",null,Lang.get("tips.edit")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("input",{id:"step-1",type:"text",className:"form-control",placeholder:Lang.get("tips.name"),value:t.name,onChange:function(e){return s("tips",t.id,Ha({},t,{name:e.target.value}))}}))),r.a.createElement("div",null,r.a.createElement(ja,{setStepIndex:n.setStepIndex,joyRide:n.state.runJoyride,joyRideRef:n.joyrideRef,stepIndex:n.state.stepIndex,tip:t,statistics:o,coupledStatistics:a})),r.a.createElement("div",{id:"step-17",style:{backgroundColor:"white"}},r.a.createElement($a,{tip:t,setStepIndex:n.setStepIndex,joyRide:n.state.runJoyride,joyRideRef:n.joyrideRef,stepIndex:n.state.stepIndex})),r.a.createElement("hr",null),r.a.createElement("div",{className:"panel panel-default",id:"step-18",style:{margin:"50px 0"}},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,Lang.get("tips.tiptext")),r.a.createElement("textarea",{className:"form-control",value:t.tipText,maxLength:1e3,rows:3,onChange:function(e){return s("tips",t.id,Ha({},t,{tipText:e.target.value}))}})),a.length>0&&r.a.createElement("p",null,Lang.get("tips.form.statistic-value-parameters")),t.moments.length>0&&r.a.createElement("p",null,Lang.get("tips.form.moment-value-parameters")),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,Lang.get("tips.form.table-statistic")),r.a.createElement("th",null,Lang.get("tips.form.table-value-parameter")),r.a.createElement("th",null,Lang.get("tips.form.table-value-name-parameter")))),r.a.createElement("tbody",null,t.moments.length>0&&r.a.createElement("tr",null,r.a.createElement("td",null,c.map((function(e){return"(".concat(e.rangeStart,"% - ").concat(e.rangeEnd,"%)")})).join(" ".concat(Lang.get("tips.or")," "))),r.a.createElement("td",null,r.a.createElement("strong",null,":days-percentage")),r.a.createElement("td",null)),a.map((function(e){var t=o[e.statistic];return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,"predefinedstatistic"===t.type&&Lang.get("statistics.predefined-stats."+t.name),"predefinedstatistic"!==t.type&&t.name),r.a.createElement("td",null,r.a.createElement("strong",null,":statistic-",e.id)),r.a.createElement("td",null,"predefinedstatistic"===t.type&&r.a.createElement("span",null,r.a.createElement("strong",null,":statistic-name-",e.id),r.a.createElement("br",null),"predefinedstatistic"===t.type&&t.valueParameterDescription)))})))),r.a.createElement("hr",null),n.state.loadingTranslations&&r.a.createElement("div",{className:"loader"},"Loading..."),!n.state.loadingTranslations&&r.a.createElement("div",null,n.renderTranslationButton(),n.renderTranslations()))),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group",style:{background:"white"},id:"step-19"},r.a.createElement("input",{id:"analysisvisible",type:"checkbox",checked:t.showInAnalysis,onChange:function(e){return s("tips",t.id,Ha({},t,{showInAnalysis:e.target.checked}))}}),r.a.createElement("label",{htmlFor:"analysisvisible"}," ",Lang.get("tips.form.showInAnalysis"))),r.a.createElement("hr",null),r.a.createElement("h3",null,Lang.get("tips.form.cohorts-enable")),r.a.createElement("div",null,r.a.createElement("div",{className:"row",style:{background:"white",marginBottom:"20px"},id:"step-20"},r.a.createElement("div",{className:"col-lg-2"},r.a.createElement("h5",null,Lang.get("tips.education-programs")),r.a.createElement("button",{className:"btn "+(null===n.state.selectedEducationProgramId?"btn-primary":"btn-default"),style:{width:"100%",marginTop:"5px",marginBottom:"5px"},type:"button",onClick:function(e){return n.setState({selectedEducationProgramId:null})}},Lang.get("tips.education-programs-all")),Object.values(i).filter(f).map((function(e){return r.a.createElement("button",{key:e.ep_id,className:"btn "+(n.state.selectedEducationProgramId===e.ep_id?"btn-primary":"btn-default"),style:{width:"100%",marginTop:"5px",marginBottom:"5px",whiteSpace:"normal"},type:"button",onClick:function(t){return n.setState({selectedEducationProgramId:e.ep_id})}},e.ep_name)}))),r.a.createElement("div",{className:"col-lg-10"},r.a.createElement("div",{className:"row",style:{paddingBottom:"20px"}},r.a.createElement("div",{className:"col-lg-6"},r.a.createElement("label",null,Lang.get("tips.form.enabledCohorts"))),r.a.createElement("div",{className:"col-lg-6 text-right"},r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{onClick:function(e){return n.toggleVisibleCohorts(!0)},type:"button",className:"btn btn-success"},r.a.createElement("span",{className:"glyphicon glyphicon-ok"})," ",Lang.get("tips.form.cohorts-enable-all")),r.a.createElement("button",{onClick:function(e){return n.toggleVisibleCohorts(!1)},type:"button",className:"btn btn-danger"},r.a.createElement("span",{className:"glyphicon glyphicon-remove"})," ",Lang.get("tips.form.cohorts-disable-all"))))),r.a.createElement("div",{className:"row"},g.filter((function(e){return!e.disabled})).sort().map((function(e){return r.a.createElement(or,{cohort:e,checked:t.enabled_cohorts.includes(e.id),onChange:function(n){var a=Ka(t.enabled_cohorts);a.includes(e.id)?a.splice(a.indexOf(e.id),1):a.push(e.id),s("tips",t.id,Ha({},t,{enabled_cohorts:a}))}})})),g.filter((function(e){return e.disabled})).sort().map((function(e){return r.a.createElement(or,{cohort:e,checked:t.enabled_cohorts.includes(e.id),onChange:function(n){var a=Ka(t.enabled_cohorts);a.includes(e.id)?a.splice(a.indexOf(e.id),1):a.push(e.id),s("tips",t.id,Ha({},t,{enabled_cohorts:a}))}})}))))),r.a.createElement("div",{style:{background:"white"},id:"step-21"},r.a.createElement("button",{disabled:""===t.name||""===t.tipText||n.state.submitting,className:"btn btn-primary",onClick:n.save},n.state.submitting&&r.a.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}),!n.state.submitting&&r.a.createElement("span",null,Lang.get("tips.save")))))),r.a.createElement(ua.c,{ref:function(e){n.joyrideRef=e},steps:n.joyrideStepsStatisticTip,run:n.state.runJoyride,hideBackButton:!0,continuous:!0,spotlightClicks:!0,spotlightPadding:5,showProgress:!0,stepIndex:n.state.stepIndex,callback:n.joyrideCallback,styles:{options:{zIndex:99999}},locale:{back:Lang.get("tips.help-steps.back"),close:Lang.get("tips.help-steps.close"),last:Lang.get("tips.help-steps.last"),next:Lang.get("tips.help-steps.next"),skip:Lang.get("tips.help-steps.skip")}}))},n.save=function(){var e=n.props.tip;n.setState({submitting:!0}),Ze.a.put("/api/tips/".concat(e.id),{tip:e,translations:n.state.translations}).then((function(e){n.setState({submitting:!1})}))},n.state={submitting:!1,saveButtonText:Lang.get("statistics.couple"),runJoyride:!1,stepIndex:0,selectedEducationProgramId:null,loadingTranslations:!1,translations:{}},n.loadTranslations=n.loadTranslations.bind(Xa(n)),n.addTranslation=n.addTranslation.bind(Xa(n)),n.setTranslation=n.setTranslation.bind(Xa(n)),n.removeTranslation=n.removeTranslation.bind(Xa(n)),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Za(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.loadTranslations()}},{key:"loadTranslations",value:function(){this.setState({loadingTranslations:!0}),D.loadTranslations("tip",this.props.match.params.id,function(e){this.setState({translations:e.data.translations,loadingTranslations:!1})}.bind(this))}},{key:"addTranslation",value:function(e){if(er.includes(e)&&!this.state.translations.hasOwnProperty(e)){var t=Ha({},this.state.translations);t[e]="",this.setState({translations:t})}}},{key:"removeTranslation",value:function(e){if(er.includes(e)&&this.state.translations.hasOwnProperty(e)){var t=Ha({},this.state.translations);delete t[e],this.setState({translations:t})}}},{key:"setTranslation",value:function(e,t){this.setState({translations:Ha({},this.state.translations,Wa({},e,t))})}},{key:"renderTranslationButton",value:function(){var e=this;return 0===er.filter((function(t){return!e.state.translations.hasOwnProperty(t)})).length?r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{disabled:!0,type:"button",className:"btn btn-default","aria-expanded":"false"},Lang.get("general.translations"))):r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-default dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false"},Lang.get("general.translations")," ",r.a.createElement("span",{className:"caret"})),r.a.createElement("ul",{className:"dropdown-menu"},er.map((function(t){return e.state.translations.hasOwnProperty(t)?null:r.a.createElement("li",{key:t,onClick:function(){return e.addTranslation(t)}},r.a.createElement("a",null,Lang.get("general."+t)))}))))}},{key:"renderTranslations",value:function(){var e=this;return 0===Object.keys(this.state.translations).length?null:r.a.createElement("div",{style:{marginTop:"10px"}},Object.keys(this.state.translations).map((function(t){return r.a.createElement("div",{key:t,style:{marginTop:"10px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",null,Lang.get("general."+t)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-11"},r.a.createElement("textarea",{className:"form-control",value:e.state.translations[t],onChange:function(n){return e.setTranslation(t,n.target.value)}})),r.a.createElement("div",{className:"col-md-1 text-right"},r.a.createElement("button",{className:"btn btn-danger",type:"button",onClick:function(){return e.removeTranslation(t)}},r.a.createElement("span",{className:"glyphicon glyphicon-trash"})))))})))}}])&&Qa(n.prototype,a),o&&Qa(n,o),t}(r.a.Component),nr=function(e,t){var n=e.entities.tips[t.match.params.id];if(void 0===n)return{tip:void 0};var a=n.coupled_statistics.sort().map((function(t){return e.entities.coupledStatistics[t]}));return{tip:n,coupledStatistics:a,statistics:e.entities.statistics,educationProgramTypes:e.entities.educationProgramTypes,educationPrograms:e.entities.educationPrograms,variableFilters:e.tipEditPageUi.variableFilters,cohorts:e.entities.cohorts,coupleStatisticForm:e.coupleStatistic,coupledStatisticsInEditMode:e.tipEditPageUi.inEditMode,moments:n.moments.map((function(t){return e.entities.moments[t]}))}},ar=function(e){return{updateEntity:function(t,n,a){return e(Ht(t,n,a))}}},rr=Object(gt.b)(nr,ar)(tr);function or(e){var t=e.cohort,n=e.checked,a=e.onChange;return r.a.createElement("div",{className:"col-md-2",key:t.id},r.a.createElement("div",{className:"form-group"},r.a.createElement("p",{className:"checkbox"},r.a.createElement("label",{style:t.disabled?{color:"rgb(155,155,155)"}:{}},r.a.createElement("input",{type:"checkbox",checked:n,onChange:a})," ",t.name))))}function ir(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mr=Object(ft.b)({entities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rt:var n=Mt({},e);return Object.keys(t.entities).forEach((function(a){return n[a]=Mt({},e[a],{},t.entities[a])})),n;case At:return Mt({},e,Ft({},t.name,Mt({},e[t.name],Ft({},t.key,t.entity))));case Vt:var a=Mt({},e[t.name]);return delete a[t.key],Mt({},e,Ft({},t.name,a));case $t:var r=Mt({},e.tips[t.tipId]);return r.moments=[].concat(Dt(r.moments),[t.momentId]),Mt({},e,{tips:Mt({},e.tips,Ft({},r.id,r))});case Yt:var o=Mt({},e.tips[t.tipId]);return o.coupled_statistics=[].concat(Dt(o.coupled_statistics),[t.coupledStatisticId]),Mt({},e,{tips:Mt({},e.tips,Ft({},o.id,o))});case Bt:var i=Mt({},e.tips[t.coupledStatistic.tip_id]);i.coupled_statistics=Dt(i.coupled_statistics),i.coupled_statistics.splice(i.coupled_statistics.indexOf(t.coupledStatistic.id),1);var l=Mt({},e.coupledStatistics);return delete l[t.coupledStatistic.id],Mt({},e,{tips:Mt({},e.tips,Ft({},i.id,i)),coupledStatistics:l});case qt:var s=Mt({},e.tips[t.tipId]);return s.moments.splice(s.moments.indexOf(t.id),1),Mt({},e,{tips:Mt({},e.tips,Ft({},s.id,s))});case Ut:var c=Mt({},e.tips);return delete c[t.id],Mt({},e,{tips:c});case zt:var u=Mt({},e.statistics);delete u[t.id];var p=[],d=Object.values(e.coupledStatistics).filter((function(e){return e.statistic===t.id&&p.push(e.id),e.statistic!==t.id})).reduce((function(e,t){return e[t.id]=t,e}),{}),m=Dt(Object.values(e.tips)).map((function(e){var t=Mt({},e);return t.coupled_statistics=t.coupled_statistics.filter((function(e){return!p.includes(e)})),t})).reduce((function(e,t){return e[t.id]=t,e}),{});return Mt({},e,{statistics:u,coupledStatistics:d,tips:m})}return e},coupleStatistic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case la:return oa({},e,ia({},t.property,t.value))}return e},tipEditPageUi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ln:var n=on(e.inEditMode);return n.includes(t.id)?n.splice(n.indexOf(t.id,1)):n.push(t.id),an({},e,{inEditMode:n});case sn:return an({},e,{variableFilters:t.variables});case cn:return an({},e,{errors:an({},e.errors,rn({},t.id,t.error))});case un:var a=an({},e.errors);return delete a[t.id],an({},e,{errors:a})}return e}}),fr=Object(ft.c)(mr);window.getState=fr.getState;var gr=function(e){return e},hr=function(e){return{loadData:function(){return Ze.a.get("/api/tips").then((function(t){e(dn(t.data.statisticVariables)),delete t.data.statisticVariables,e(Jt(Object(bt.a)(t.data,Tt.loadSchema).entities))}))}}},yr=function(e){function t(e){var n;return sr(this,t),(n=cr(this,ur(t).call(this,e))).componentDidMount=function(){n.props.loadData()},n.render=function(){return r.a.createElement(ht.c,null,r.a.createElement(ht.a,{exact:!0,path:"/tip/:id",component:rr}),r.a.createElement(ht.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Gn,{history:n.props.history,currentPage:n.state.currentPage,setCurrentPage:function(e){return n.setState({currentPage:e})}})}}))},n.state={currentPage:"tips"},n}return pr(t,e),t}(r.a.Component),br=Object(ht.f)(Object(gt.b)(gr,hr)(yr)),vr=function(){return r.a.createElement(gt.a,{store:fr},r.a.createElement(yt.a,null,r.a.createElement(Er,null,r.a.createElement(br,null))))},Er=function(e){function t(e){var n;return sr(this,t),(n=cr(this,ur(t).call(this,e))).state={hasError:!1,error:"",logged:!1},n}var n,a,o;return pr(t,e),n=t,(a=[{key:"componentDidCatch",value:function(e,t){var n=this;this.setState({hasError:!0}),console.log(e,t),e.componentStack=t.componentStack,Ze.a.post("/reactlog",{log:JSON.stringify(e,Object.getOwnPropertyNames(e))}).then((function(){return n.setState({logged:!0})}))}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",null,r.a.createElement("h3",null,"Whoops..."),r.a.createElement("p",null,"Something that should not have happened happened."),this.state.logged&&r.a.createElement("p",null,"The error has been logged and will be fixed as soon as possible")):this.props.children}}])&&ir(n.prototype,a),o&&ir(n,o),t}(r.a.Component);var wr,Or={ActivityActingProcessTable:x,ActivityProducingProcessTable:lt,EducationProgramsApp:Ve,ProducingWeekStatesExport:mt,TipsApp:vr,CreateForm:Cn};(wr=document.querySelectorAll(".__reactRoot"),function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(wr)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(wr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).forEach((function(e){var t=Or[e.id];if(t){var n=Object.assign({},e.dataset);i.a.render(r.a.createElement(t,n),e)}}))},RnhZ:function(e,t,n){var a={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-SG":"zavE","./en-SG.js":"zavE","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="RnhZ"},aUiL:function(e,t){},c9kc:function(e,t){var n={step:function(e){$.ajax({type:"POST",url:"/dashboard/builder/step/"+e,data:$("#wizard-form").serialize()}).done((function(e){var t=JSON.parse(e);if(5==t.step)window.location.reload();else if(null!=t.error){var a="";for(var r in t.error)a+="<li>".concat(t.error[r],"</li>");$("#wizard-error").html("<ul>".concat(a,"</ul>"))}else $("#QueryBuilder").load("/dashboard/builder/step/"+t.step,(function(e,a,r){n["step_"+t.step](),403==r.status&&window.location.reload()}))}))},open:function(){$("#QueryBuilder").load("/dashboard/builder/step/0")},step_2:function(){$("#analysis_entity").on("change",(function(e){$.getJSON("/dashboard/builder/relations/"+$(this).val(),(function(e){var t="";$.each(e,(function(e,n){t+=' <div class="form-check">\n                <input class="form-check-input" type="checkbox" name="analysis_relation[]" id="analysis_relations_'.concat(e,'" value="').concat(e,'">\n                <label class="form-check-label" for="analysis_relations_').concat(e,'">\n                    ').concat(n,"\n                            </label>\n                        </div>")})),$(".relations").html(t)}))}))},step_3:function(){var e;this.resetListeners(),$.getJSON("/dashboard/builder/tables",(function(t){e=t})),$(".query-add-filter").on("click",(function(){var t=$(".query-filter-container .row:last-child").data("id");isNaN(t)&&(t=-1),$(".query-filter-container").append('\n            <div class="form-group row" data-id="'.concat(t+1,'">\n                <div class="col-md-1" style="width: 25px;"><a href="#" class="query-delete-filter" style="line-height: 34px; text-decoration: none;">X</a></div>\n                <div class="col-md-3">\n                    <select class="form-control query-data-table" name="query_filter[').concat(t+1,'][table]">\n                       ').concat(Object.keys(e).map((function(t){return"<option value='"+t+"'>"+e[t]+"</option>"})),'\n                    </select>\n                </div>\n                <div class="col-md-2">\n                    <select class="form-control query-data-column" name="query_filter[').concat(t+1,'][column]"></select>\n                </div>\n                <div class="col-md-2">\n                    <select class="form-control query-filter-type" name="query_filter[').concat(t+1,'][type]">\n                        <option value="equals" selected>').concat(Lang.get("querybuilder.step3.filter-equals"),'</option>\n                        <option value="largerthan">').concat(Lang.get("querybuilder.step3.filter-largerthan"),'</option>\n                        <option value="smallerthan">').concat(Lang.get("querybuilder.step3.filter-smallerthan"),'</option>\n                        <option value="group">').concat(Lang.get("querybuilder.step3.filter-groupby"),'</option>\n                    </select>\n                </div>\n                <div class="col-md-2" style="width: 12%;">\n                    <input name="query_filter[').concat(t+1,'][value]" class="form-control query-filter-value" placeholder="').concat(Lang.get("querybuilder.step3.value"),'">\n                </div>\n            </div>')),n.resetListeners(),$(".query-filter-container .row:last-child .query-data-table").change()}))},step_4:function(){$("#type_id, #x_axis, #y_axis").on("change",(function(){$(".chart-container").load("/dashboard/builder/chart",{type:$("#type_id").val(),x:$("#x_axis").val(),y:$("#y_axis").val(),name:$("#name").val()})})),$("#type_id").change()},resetListeners:function(){$(".query-data-table").off("change"),$(".query-delete-filter").off("click"),$(".query-data-table").on("change",(function(){var e=this;$.getJSON("/dashboard/builder/columns/"+this.value,(function(t){$(e).parent().parent().find(".query-data-column").empty();var n="";$.each(t,(function(e,t){n+="<option id='"+t+"'>"+t+"</option>"})),$(e).parent().parent().find(".query-data-column").append(n)}))})),$(".query-filter-type").on("change",(function(){"group"==$(this).val()?$(this).parent().parent().find(".query-filter-value").css("display","none"):$(this).parent().parent().find(".query-filter-value").css("display","block")})),$(".query-delete-filter").on("click",(function(){$(this).parent().parent().remove()}))},executeBuilderQuery:function(e){$.ajax({type:"POST",url:"/dashboard/builder/query",data:$("#wizard-form").serialize()}).done((function(e){var t=e;null!=t.error&&alert(t.error);var n="";for(var a in t[0])n+='<th style="max-width: 111px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;">'.concat(a,"</th>");for(var r="",o=0;o<t.length;o++){var i="<tr>";for(var l in t[o])i+='<td style="max-width: 111px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;">'.concat(t[o][l],"</td>");r+=i+="</tr>"}$("#query-result").html('<table class="table table-striped">\n                    <thead>\n                        '.concat(n,"\n                    </thead>\n                    <tbody>\n                        ").concat(r,"\n                    </tbody>\n                </table>"))}))},executeCustomBuilderQuery:function(e){$.ajax({type:"POST",url:"/dashboard/builder/testQuery",data:e}).done((function(e){var t=e,n="";for(var a in t[0])n+="<th>".concat(a,"</th>");for(var r="",o=0;o<6;o++){var i="<tr>";for(var l in t[o])i+="<td>".concat(t[o][l],"</td>");r+=i+="</tr>"}$("#dataCustomQuery").html('<table class="table table-striped">\n                    <thead>\n                        '.concat(n,"\n                    </thead>\n                    <tbody>\n                        ").concat(r,"\n                    </tbody>\n                </table>"))}))}};window.Wizard=n},ua8M:function(e,t){}},[[0,1,2]]]);
//# sourceMappingURL=app.js.map